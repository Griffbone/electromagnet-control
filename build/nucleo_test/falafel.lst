ARM GAS  /tmp/ccy3FgJK.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"falafel.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "src/falafel/falafel.c"
  19              		.section	.text.packet_get_standard_version,"ax",%progbits
  20              		.align	1
  21              		.global	packet_get_standard_version
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	packet_get_standard_version:
  27              	.LVL0:
  28              	.LFB3:
   1:src/falafel/falafel.c **** #include "falafel.h"
   2:src/falafel/falafel.c **** 
   3:src/falafel/falafel.c **** packet_err_t packet_get_standard_version(const packet_t *packet, uint8_t *version) {
  29              		.loc 1 3 84 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
   4:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
  34              		.loc 1 4 3 view .LVU1
   5:src/falafel/falafel.c ****   if (!packet || !version) {
  35              		.loc 1 5 3 view .LVU2
  36              		.loc 1 5 6 is_stmt 0 view .LVU3
  37 0000 0029     		cmp	r1, #0
  38 0002 18BF     		it	ne
  39 0004 0028     		cmpne	r0, #0
  40 0006 03D0     		beq	.L3
   6:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
   7:src/falafel/falafel.c ****   } else {
   8:src/falafel/falafel.c ****     *version = packet->standard_version;
  41              		.loc 1 8 5 is_stmt 1 view .LVU4
  42              		.loc 1 8 22 is_stmt 0 view .LVU5
  43 0008 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
  44              		.loc 1 8 14 view .LVU6
  45 000a 0A70     		strb	r2, [r1]
   4:src/falafel/falafel.c ****   if (!packet || !version) {
  46              		.loc 1 4 16 view .LVU7
  47 000c 0020     		movs	r0, #0
  48              	.LVL1:
   4:src/falafel/falafel.c ****   if (!packet || !version) {
ARM GAS  /tmp/ccy3FgJK.s 			page 2


  49              		.loc 1 4 16 view .LVU8
  50 000e 7047     		bx	lr
  51              	.LVL2:
  52              	.L3:
   6:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  53              		.loc 1 6 12 view .LVU9
  54 0010 0120     		movs	r0, #1
  55              	.LVL3:
   9:src/falafel/falafel.c ****   }
  10:src/falafel/falafel.c ****   return status;
  56              		.loc 1 10 3 is_stmt 1 view .LVU10
  11:src/falafel/falafel.c **** }
  57              		.loc 1 11 1 is_stmt 0 view .LVU11
  58 0012 7047     		bx	lr
  59              		.cfi_endproc
  60              	.LFE3:
  62              		.section	.text.packet_set_standard_version,"ax",%progbits
  63              		.align	1
  64              		.global	packet_set_standard_version
  65              		.syntax unified
  66              		.thumb
  67              		.thumb_func
  69              	packet_set_standard_version:
  70              	.LVL4:
  71              	.LFB4:
  12:src/falafel/falafel.c **** 
  13:src/falafel/falafel.c **** packet_err_t packet_set_standard_version(packet_t *packet, uint8_t version) {
  72              		.loc 1 13 77 is_stmt 1 view -0
  73              		.cfi_startproc
  74              		@ args = 0, pretend = 0, frame = 0
  75              		@ frame_needed = 0, uses_anonymous_args = 0
  76              		@ link register save eliminated.
  14:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
  77              		.loc 1 14 3 view .LVU13
  15:src/falafel/falafel.c ****   if (!packet) {
  78              		.loc 1 15 3 view .LVU14
  79              		.loc 1 15 6 is_stmt 0 view .LVU15
  80 0000 10B1     		cbz	r0, .L6
  16:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  17:src/falafel/falafel.c ****   } else {
  18:src/falafel/falafel.c ****     packet->standard_version = version;
  81              		.loc 1 18 5 is_stmt 1 view .LVU16
  82              		.loc 1 18 30 is_stmt 0 view .LVU17
  83 0002 0170     		strb	r1, [r0]
  14:src/falafel/falafel.c ****   if (!packet) {
  84              		.loc 1 14 16 view .LVU18
  85 0004 0020     		movs	r0, #0
  86              	.LVL5:
  14:src/falafel/falafel.c ****   if (!packet) {
  87              		.loc 1 14 16 view .LVU19
  88 0006 7047     		bx	lr
  89              	.LVL6:
  90              	.L6:
  16:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  91              		.loc 1 16 12 view .LVU20
  92 0008 0120     		movs	r0, #1
  93              	.LVL7:
ARM GAS  /tmp/ccy3FgJK.s 			page 3


  19:src/falafel/falafel.c ****   }
  20:src/falafel/falafel.c ****   return status;
  94              		.loc 1 20 3 is_stmt 1 view .LVU21
  21:src/falafel/falafel.c **** }
  95              		.loc 1 21 1 is_stmt 0 view .LVU22
  96 000a 7047     		bx	lr
  97              		.cfi_endproc
  98              	.LFE4:
 100              		.section	.text.packet_get_type,"ax",%progbits
 101              		.align	1
 102              		.global	packet_get_type
 103              		.syntax unified
 104              		.thumb
 105              		.thumb_func
 107              	packet_get_type:
 108              	.LVL8:
 109              	.LFB5:
  22:src/falafel/falafel.c **** 
  23:src/falafel/falafel.c **** packet_err_t packet_get_type(const packet_t *packet, uint8_t *type) {
 110              		.loc 1 23 69 is_stmt 1 view -0
 111              		.cfi_startproc
 112              		@ args = 0, pretend = 0, frame = 0
 113              		@ frame_needed = 0, uses_anonymous_args = 0
 114              		@ link register save eliminated.
  24:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 115              		.loc 1 24 3 view .LVU24
  25:src/falafel/falafel.c ****   if (!packet || !type) {
 116              		.loc 1 25 3 view .LVU25
 117              		.loc 1 25 6 is_stmt 0 view .LVU26
 118 0000 0029     		cmp	r1, #0
 119 0002 18BF     		it	ne
 120 0004 0028     		cmpne	r0, #0
 121 0006 03D0     		beq	.L9
  26:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  27:src/falafel/falafel.c ****   } else {
  28:src/falafel/falafel.c ****     *type = packet->type;
 122              		.loc 1 28 5 is_stmt 1 view .LVU27
 123              		.loc 1 28 19 is_stmt 0 view .LVU28
 124 0008 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 125              		.loc 1 28 11 view .LVU29
 126 000a 0A70     		strb	r2, [r1]
  24:src/falafel/falafel.c ****   if (!packet || !type) {
 127              		.loc 1 24 16 view .LVU30
 128 000c 0020     		movs	r0, #0
 129              	.LVL9:
  24:src/falafel/falafel.c ****   if (!packet || !type) {
 130              		.loc 1 24 16 view .LVU31
 131 000e 7047     		bx	lr
 132              	.LVL10:
 133              	.L9:
  26:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 134              		.loc 1 26 12 view .LVU32
 135 0010 0120     		movs	r0, #1
 136              	.LVL11:
  29:src/falafel/falafel.c ****   }
  30:src/falafel/falafel.c ****   return status;
 137              		.loc 1 30 3 is_stmt 1 view .LVU33
ARM GAS  /tmp/ccy3FgJK.s 			page 4


  31:src/falafel/falafel.c **** }
 138              		.loc 1 31 1 is_stmt 0 view .LVU34
 139 0012 7047     		bx	lr
 140              		.cfi_endproc
 141              	.LFE5:
 143              		.section	.text.packet_set_type,"ax",%progbits
 144              		.align	1
 145              		.global	packet_set_type
 146              		.syntax unified
 147              		.thumb
 148              		.thumb_func
 150              	packet_set_type:
 151              	.LVL12:
 152              	.LFB6:
  32:src/falafel/falafel.c **** 
  33:src/falafel/falafel.c **** packet_err_t packet_set_type(packet_t *packet, uint8_t type) {
 153              		.loc 1 33 62 is_stmt 1 view -0
 154              		.cfi_startproc
 155              		@ args = 0, pretend = 0, frame = 0
 156              		@ frame_needed = 0, uses_anonymous_args = 0
 157              		@ link register save eliminated.
  34:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 158              		.loc 1 34 3 view .LVU36
  35:src/falafel/falafel.c ****   if (!packet) {
 159              		.loc 1 35 3 view .LVU37
 160              		.loc 1 35 6 is_stmt 0 view .LVU38
 161 0000 10B1     		cbz	r0, .L12
  36:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  37:src/falafel/falafel.c ****   } else {
  38:src/falafel/falafel.c ****     packet->type = type;
 162              		.loc 1 38 5 is_stmt 1 view .LVU39
 163              		.loc 1 38 18 is_stmt 0 view .LVU40
 164 0002 4170     		strb	r1, [r0, #1]
  34:src/falafel/falafel.c ****   if (!packet) {
 165              		.loc 1 34 16 view .LVU41
 166 0004 0020     		movs	r0, #0
 167              	.LVL13:
  34:src/falafel/falafel.c ****   if (!packet) {
 168              		.loc 1 34 16 view .LVU42
 169 0006 7047     		bx	lr
 170              	.LVL14:
 171              	.L12:
  36:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 172              		.loc 1 36 12 view .LVU43
 173 0008 0120     		movs	r0, #1
 174              	.LVL15:
  39:src/falafel/falafel.c ****   }
  40:src/falafel/falafel.c ****   return status;
 175              		.loc 1 40 3 is_stmt 1 view .LVU44
  41:src/falafel/falafel.c **** }
 176              		.loc 1 41 1 is_stmt 0 view .LVU45
 177 000a 7047     		bx	lr
 178              		.cfi_endproc
 179              	.LFE6:
 181              		.section	.text.packet_get_data_flag,"ax",%progbits
 182              		.align	1
 183              		.global	packet_get_data_flag
ARM GAS  /tmp/ccy3FgJK.s 			page 5


 184              		.syntax unified
 185              		.thumb
 186              		.thumb_func
 188              	packet_get_data_flag:
 189              	.LVL16:
 190              	.LFB7:
  42:src/falafel/falafel.c **** 
  43:src/falafel/falafel.c **** packet_err_t packet_get_data_flag(const packet_t *packet, uint8_t *flag) {
 191              		.loc 1 43 74 is_stmt 1 view -0
 192              		.cfi_startproc
 193              		@ args = 0, pretend = 0, frame = 0
 194              		@ frame_needed = 0, uses_anonymous_args = 0
 195              		@ link register save eliminated.
  44:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 196              		.loc 1 44 3 view .LVU47
  45:src/falafel/falafel.c ****   if (!packet || !flag) {
 197              		.loc 1 45 3 view .LVU48
 198              		.loc 1 45 6 is_stmt 0 view .LVU49
 199 0000 0029     		cmp	r1, #0
 200 0002 18BF     		it	ne
 201 0004 0028     		cmpne	r0, #0
 202 0006 03D0     		beq	.L15
  46:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  47:src/falafel/falafel.c ****   } else {
  48:src/falafel/falafel.c ****     *flag = packet->data_flag;
 203              		.loc 1 48 5 is_stmt 1 view .LVU50
 204              		.loc 1 48 19 is_stmt 0 view .LVU51
 205 0008 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 206              		.loc 1 48 11 view .LVU52
 207 000a 0A70     		strb	r2, [r1]
  44:src/falafel/falafel.c ****   if (!packet || !flag) {
 208              		.loc 1 44 16 view .LVU53
 209 000c 0020     		movs	r0, #0
 210              	.LVL17:
  44:src/falafel/falafel.c ****   if (!packet || !flag) {
 211              		.loc 1 44 16 view .LVU54
 212 000e 7047     		bx	lr
 213              	.LVL18:
 214              	.L15:
  46:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 215              		.loc 1 46 12 view .LVU55
 216 0010 0120     		movs	r0, #1
 217              	.LVL19:
  49:src/falafel/falafel.c ****   }
  50:src/falafel/falafel.c ****   return status;
 218              		.loc 1 50 3 is_stmt 1 view .LVU56
  51:src/falafel/falafel.c **** }
 219              		.loc 1 51 1 is_stmt 0 view .LVU57
 220 0012 7047     		bx	lr
 221              		.cfi_endproc
 222              	.LFE7:
 224              		.section	.text.packet_set_data_flag,"ax",%progbits
 225              		.align	1
 226              		.global	packet_set_data_flag
 227              		.syntax unified
 228              		.thumb
 229              		.thumb_func
ARM GAS  /tmp/ccy3FgJK.s 			page 6


 231              	packet_set_data_flag:
 232              	.LVL20:
 233              	.LFB8:
  52:src/falafel/falafel.c **** 
  53:src/falafel/falafel.c **** packet_err_t packet_set_data_flag(packet_t *packet, uint8_t flag) {
 234              		.loc 1 53 67 is_stmt 1 view -0
 235              		.cfi_startproc
 236              		@ args = 0, pretend = 0, frame = 0
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 238              		@ link register save eliminated.
  54:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 239              		.loc 1 54 3 view .LVU59
  55:src/falafel/falafel.c ****   if (!packet) {
 240              		.loc 1 55 3 view .LVU60
 241              		.loc 1 55 6 is_stmt 0 view .LVU61
 242 0000 10B1     		cbz	r0, .L18
  56:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  57:src/falafel/falafel.c ****   } else {
  58:src/falafel/falafel.c ****     packet->data_flag = flag;
 243              		.loc 1 58 5 is_stmt 1 view .LVU62
 244              		.loc 1 58 23 is_stmt 0 view .LVU63
 245 0002 8170     		strb	r1, [r0, #2]
  54:src/falafel/falafel.c ****   if (!packet) {
 246              		.loc 1 54 16 view .LVU64
 247 0004 0020     		movs	r0, #0
 248              	.LVL21:
  54:src/falafel/falafel.c ****   if (!packet) {
 249              		.loc 1 54 16 view .LVU65
 250 0006 7047     		bx	lr
 251              	.LVL22:
 252              	.L18:
  56:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 253              		.loc 1 56 12 view .LVU66
 254 0008 0120     		movs	r0, #1
 255              	.LVL23:
  59:src/falafel/falafel.c ****   }
  60:src/falafel/falafel.c ****   return status;
 256              		.loc 1 60 3 is_stmt 1 view .LVU67
  61:src/falafel/falafel.c **** }
 257              		.loc 1 61 1 is_stmt 0 view .LVU68
 258 000a 7047     		bx	lr
 259              		.cfi_endproc
 260              	.LFE8:
 262              		.section	.text.packet_get_id,"ax",%progbits
 263              		.align	1
 264              		.global	packet_get_id
 265              		.syntax unified
 266              		.thumb
 267              		.thumb_func
 269              	packet_get_id:
 270              	.LVL24:
 271              	.LFB9:
  62:src/falafel/falafel.c **** 
  63:src/falafel/falafel.c **** packet_err_t packet_get_id(const packet_t *packet, uint32_t *id) {
 272              		.loc 1 63 66 is_stmt 1 view -0
 273              		.cfi_startproc
 274              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccy3FgJK.s 			page 7


 275              		@ frame_needed = 0, uses_anonymous_args = 0
 276              		@ link register save eliminated.
  64:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 277              		.loc 1 64 3 view .LVU70
  65:src/falafel/falafel.c ****   if (!packet || !id) {
 278              		.loc 1 65 3 view .LVU71
 279              		.loc 1 65 6 is_stmt 0 view .LVU72
 280 0000 0029     		cmp	r1, #0
 281 0002 18BF     		it	ne
 282 0004 0028     		cmpne	r0, #0
 283 0006 03D0     		beq	.L21
  66:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  67:src/falafel/falafel.c ****   } else {
  68:src/falafel/falafel.c ****     *id = packet->id;
 284              		.loc 1 68 5 is_stmt 1 view .LVU73
 285              		.loc 1 68 17 is_stmt 0 view .LVU74
 286 0008 4268     		ldr	r2, [r0, #4]
 287              		.loc 1 68 9 view .LVU75
 288 000a 0A60     		str	r2, [r1]
  64:src/falafel/falafel.c ****   if (!packet || !id) {
 289              		.loc 1 64 16 view .LVU76
 290 000c 0020     		movs	r0, #0
 291              	.LVL25:
  64:src/falafel/falafel.c ****   if (!packet || !id) {
 292              		.loc 1 64 16 view .LVU77
 293 000e 7047     		bx	lr
 294              	.LVL26:
 295              	.L21:
  66:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 296              		.loc 1 66 12 view .LVU78
 297 0010 0120     		movs	r0, #1
 298              	.LVL27:
  69:src/falafel/falafel.c ****   }
  70:src/falafel/falafel.c ****   return status;
 299              		.loc 1 70 3 is_stmt 1 view .LVU79
  71:src/falafel/falafel.c **** }
 300              		.loc 1 71 1 is_stmt 0 view .LVU80
 301 0012 7047     		bx	lr
 302              		.cfi_endproc
 303              	.LFE9:
 305              		.section	.text.packet_set_id,"ax",%progbits
 306              		.align	1
 307              		.global	packet_set_id
 308              		.syntax unified
 309              		.thumb
 310              		.thumb_func
 312              	packet_set_id:
 313              	.LVL28:
 314              	.LFB10:
  72:src/falafel/falafel.c **** 
  73:src/falafel/falafel.c **** packet_err_t packet_set_id(packet_t *packet, uint32_t id) {
 315              		.loc 1 73 59 is_stmt 1 view -0
 316              		.cfi_startproc
 317              		@ args = 0, pretend = 0, frame = 0
 318              		@ frame_needed = 0, uses_anonymous_args = 0
 319              		@ link register save eliminated.
  74:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
ARM GAS  /tmp/ccy3FgJK.s 			page 8


 320              		.loc 1 74 3 view .LVU82
  75:src/falafel/falafel.c ****   if (!packet) {
 321              		.loc 1 75 3 view .LVU83
 322              		.loc 1 75 6 is_stmt 0 view .LVU84
 323 0000 10B1     		cbz	r0, .L24
  76:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  77:src/falafel/falafel.c ****   } else {
  78:src/falafel/falafel.c ****     packet->id = id;
 324              		.loc 1 78 5 is_stmt 1 view .LVU85
 325              		.loc 1 78 16 is_stmt 0 view .LVU86
 326 0002 4160     		str	r1, [r0, #4]
  74:src/falafel/falafel.c ****   if (!packet) {
 327              		.loc 1 74 16 view .LVU87
 328 0004 0020     		movs	r0, #0
 329              	.LVL29:
  74:src/falafel/falafel.c ****   if (!packet) {
 330              		.loc 1 74 16 view .LVU88
 331 0006 7047     		bx	lr
 332              	.LVL30:
 333              	.L24:
  76:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 334              		.loc 1 76 12 view .LVU89
 335 0008 0120     		movs	r0, #1
 336              	.LVL31:
  79:src/falafel/falafel.c ****   }
  80:src/falafel/falafel.c ****   return status;
 337              		.loc 1 80 3 is_stmt 1 view .LVU90
  81:src/falafel/falafel.c **** }
 338              		.loc 1 81 1 is_stmt 0 view .LVU91
 339 000a 7047     		bx	lr
 340              		.cfi_endproc
 341              	.LFE10:
 343              		.section	.text.packet_get_transmit_time,"ax",%progbits
 344              		.align	1
 345              		.global	packet_get_transmit_time
 346              		.syntax unified
 347              		.thumb
 348              		.thumb_func
 350              	packet_get_transmit_time:
 351              	.LVL32:
 352              	.LFB11:
  82:src/falafel/falafel.c **** 
  83:src/falafel/falafel.c **** packet_err_t packet_get_transmit_time(const packet_t *packet, uint32_t *time) {
 353              		.loc 1 83 79 is_stmt 1 view -0
 354              		.cfi_startproc
 355              		@ args = 0, pretend = 0, frame = 0
 356              		@ frame_needed = 0, uses_anonymous_args = 0
 357              		@ link register save eliminated.
  84:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 358              		.loc 1 84 3 view .LVU93
  85:src/falafel/falafel.c ****   if (!packet || !time) {
 359              		.loc 1 85 3 view .LVU94
 360              		.loc 1 85 6 is_stmt 0 view .LVU95
 361 0000 0029     		cmp	r1, #0
 362 0002 18BF     		it	ne
 363 0004 0028     		cmpne	r0, #0
 364 0006 03D0     		beq	.L27
ARM GAS  /tmp/ccy3FgJK.s 			page 9


  86:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  87:src/falafel/falafel.c ****   } else {
  88:src/falafel/falafel.c ****     *time = packet->transmit_time;
 365              		.loc 1 88 5 is_stmt 1 view .LVU96
 366              		.loc 1 88 19 is_stmt 0 view .LVU97
 367 0008 8268     		ldr	r2, [r0, #8]
 368              		.loc 1 88 11 view .LVU98
 369 000a 0A60     		str	r2, [r1]
  84:src/falafel/falafel.c ****   if (!packet || !time) {
 370              		.loc 1 84 16 view .LVU99
 371 000c 0020     		movs	r0, #0
 372              	.LVL33:
  84:src/falafel/falafel.c ****   if (!packet || !time) {
 373              		.loc 1 84 16 view .LVU100
 374 000e 7047     		bx	lr
 375              	.LVL34:
 376              	.L27:
  86:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 377              		.loc 1 86 12 view .LVU101
 378 0010 0120     		movs	r0, #1
 379              	.LVL35:
  89:src/falafel/falafel.c ****   }
  90:src/falafel/falafel.c ****   return status;
 380              		.loc 1 90 3 is_stmt 1 view .LVU102
  91:src/falafel/falafel.c **** }
 381              		.loc 1 91 1 is_stmt 0 view .LVU103
 382 0012 7047     		bx	lr
 383              		.cfi_endproc
 384              	.LFE11:
 386              		.section	.text.packet_set_transmit_time,"ax",%progbits
 387              		.align	1
 388              		.global	packet_set_transmit_time
 389              		.syntax unified
 390              		.thumb
 391              		.thumb_func
 393              	packet_set_transmit_time:
 394              	.LVL36:
 395              	.LFB12:
  92:src/falafel/falafel.c **** 
  93:src/falafel/falafel.c **** packet_err_t packet_set_transmit_time(packet_t *packet, uint32_t time) {
 396              		.loc 1 93 72 is_stmt 1 view -0
 397              		.cfi_startproc
 398              		@ args = 0, pretend = 0, frame = 0
 399              		@ frame_needed = 0, uses_anonymous_args = 0
 400              		@ link register save eliminated.
  94:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 401              		.loc 1 94 3 view .LVU105
  95:src/falafel/falafel.c ****   if (!packet) {
 402              		.loc 1 95 3 view .LVU106
 403              		.loc 1 95 6 is_stmt 0 view .LVU107
 404 0000 10B1     		cbz	r0, .L30
  96:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
  97:src/falafel/falafel.c ****   } else {
  98:src/falafel/falafel.c ****     packet->transmit_time = time;
 405              		.loc 1 98 5 is_stmt 1 view .LVU108
 406              		.loc 1 98 27 is_stmt 0 view .LVU109
 407 0002 8160     		str	r1, [r0, #8]
ARM GAS  /tmp/ccy3FgJK.s 			page 10


  94:src/falafel/falafel.c ****   if (!packet) {
 408              		.loc 1 94 16 view .LVU110
 409 0004 0020     		movs	r0, #0
 410              	.LVL37:
  94:src/falafel/falafel.c ****   if (!packet) {
 411              		.loc 1 94 16 view .LVU111
 412 0006 7047     		bx	lr
 413              	.LVL38:
 414              	.L30:
  96:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 415              		.loc 1 96 12 view .LVU112
 416 0008 0120     		movs	r0, #1
 417              	.LVL39:
  99:src/falafel/falafel.c ****   }
 100:src/falafel/falafel.c ****   return status;
 418              		.loc 1 100 3 is_stmt 1 view .LVU113
 101:src/falafel/falafel.c **** }
 419              		.loc 1 101 1 is_stmt 0 view .LVU114
 420 000a 7047     		bx	lr
 421              		.cfi_endproc
 422              	.LFE12:
 424              		.section	.text.packet_get_data_length,"ax",%progbits
 425              		.align	1
 426              		.global	packet_get_data_length
 427              		.syntax unified
 428              		.thumb
 429              		.thumb_func
 431              	packet_get_data_length:
 432              	.LVL40:
 433              	.LFB13:
 102:src/falafel/falafel.c **** 
 103:src/falafel/falafel.c **** packet_err_t packet_get_data_length(const packet_t *packet, uint16_t *length) {
 434              		.loc 1 103 79 is_stmt 1 view -0
 435              		.cfi_startproc
 436              		@ args = 0, pretend = 0, frame = 0
 437              		@ frame_needed = 0, uses_anonymous_args = 0
 438              		@ link register save eliminated.
 104:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 439              		.loc 1 104 3 view .LVU116
 105:src/falafel/falafel.c ****   if (!packet || !length) {
 440              		.loc 1 105 3 view .LVU117
 441              		.loc 1 105 6 is_stmt 0 view .LVU118
 442 0000 0029     		cmp	r1, #0
 443 0002 18BF     		it	ne
 444 0004 0028     		cmpne	r0, #0
 445 0006 03D0     		beq	.L33
 106:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 107:src/falafel/falafel.c ****   } else {
 108:src/falafel/falafel.c ****     *length = packet->data_length;
 446              		.loc 1 108 5 is_stmt 1 view .LVU119
 447              		.loc 1 108 21 is_stmt 0 view .LVU120
 448 0008 C289     		ldrh	r2, [r0, #14]
 449              		.loc 1 108 13 view .LVU121
 450 000a 0A80     		strh	r2, [r1]	@ movhi
 104:src/falafel/falafel.c ****   if (!packet || !length) {
 451              		.loc 1 104 16 view .LVU122
 452 000c 0020     		movs	r0, #0
ARM GAS  /tmp/ccy3FgJK.s 			page 11


 453              	.LVL41:
 104:src/falafel/falafel.c ****   if (!packet || !length) {
 454              		.loc 1 104 16 view .LVU123
 455 000e 7047     		bx	lr
 456              	.LVL42:
 457              	.L33:
 106:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 458              		.loc 1 106 12 view .LVU124
 459 0010 0120     		movs	r0, #1
 460              	.LVL43:
 109:src/falafel/falafel.c ****   }
 110:src/falafel/falafel.c ****   return status;
 461              		.loc 1 110 3 is_stmt 1 view .LVU125
 111:src/falafel/falafel.c **** }
 462              		.loc 1 111 1 is_stmt 0 view .LVU126
 463 0012 7047     		bx	lr
 464              		.cfi_endproc
 465              	.LFE13:
 467              		.section	.text.packet_set_data_length,"ax",%progbits
 468              		.align	1
 469              		.global	packet_set_data_length
 470              		.syntax unified
 471              		.thumb
 472              		.thumb_func
 474              	packet_set_data_length:
 475              	.LVL44:
 476              	.LFB14:
 112:src/falafel/falafel.c **** 
 113:src/falafel/falafel.c **** packet_err_t packet_set_data_length(packet_t *packet, uint16_t length) {
 477              		.loc 1 113 72 is_stmt 1 view -0
 478              		.cfi_startproc
 479              		@ args = 0, pretend = 0, frame = 0
 480              		@ frame_needed = 0, uses_anonymous_args = 0
 481              		@ link register save eliminated.
 114:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 482              		.loc 1 114 3 view .LVU128
 115:src/falafel/falafel.c ****   if (!packet) {
 483              		.loc 1 115 3 view .LVU129
 484              		.loc 1 115 6 is_stmt 0 view .LVU130
 485 0000 10B1     		cbz	r0, .L36
 116:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 117:src/falafel/falafel.c ****   } else {
 118:src/falafel/falafel.c ****     packet->data_length = length;
 486              		.loc 1 118 5 is_stmt 1 view .LVU131
 487              		.loc 1 118 25 is_stmt 0 view .LVU132
 488 0002 C181     		strh	r1, [r0, #14]	@ movhi
 114:src/falafel/falafel.c ****   if (!packet) {
 489              		.loc 1 114 16 view .LVU133
 490 0004 0020     		movs	r0, #0
 491              	.LVL45:
 114:src/falafel/falafel.c ****   if (!packet) {
 492              		.loc 1 114 16 view .LVU134
 493 0006 7047     		bx	lr
 494              	.LVL46:
 495              	.L36:
 116:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 496              		.loc 1 116 12 view .LVU135
ARM GAS  /tmp/ccy3FgJK.s 			page 12


 497 0008 0120     		movs	r0, #1
 498              	.LVL47:
 119:src/falafel/falafel.c ****   }
 120:src/falafel/falafel.c ****   return status;
 499              		.loc 1 120 3 is_stmt 1 view .LVU136
 121:src/falafel/falafel.c **** }
 500              		.loc 1 121 1 is_stmt 0 view .LVU137
 501 000a 7047     		bx	lr
 502              		.cfi_endproc
 503              	.LFE14:
 505              		.section	.text.packet_get_data,"ax",%progbits
 506              		.align	1
 507              		.global	packet_get_data
 508              		.syntax unified
 509              		.thumb
 510              		.thumb_func
 512              	packet_get_data:
 513              	.LVL48:
 514              	.LFB15:
 122:src/falafel/falafel.c **** 
 123:src/falafel/falafel.c **** packet_err_t packet_get_data(const packet_t *packet, uint8_t *buffer, const uint16_t buffer_length)
 515              		.loc 1 123 101 is_stmt 1 view -0
 516              		.cfi_startproc
 517              		@ args = 0, pretend = 0, frame = 0
 518              		@ frame_needed = 0, uses_anonymous_args = 0
 124:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 519              		.loc 1 124 3 view .LVU139
 125:src/falafel/falafel.c ****   if (!packet || !buffer) {
 520              		.loc 1 125 3 view .LVU140
 521              		.loc 1 125 6 is_stmt 0 view .LVU141
 522 0000 0029     		cmp	r1, #0
 523 0002 18BF     		it	ne
 524 0004 0028     		cmpne	r0, #0
 525 0006 11D0     		beq	.L39
 123:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 526              		.loc 1 123 101 view .LVU142
 527 0008 08B5     		push	{r3, lr}
 528              	.LCFI0:
 529              		.cfi_def_cfa_offset 8
 530              		.cfi_offset 3, -8
 531              		.cfi_offset 14, -4
 532 000a 9446     		mov	ip, r2
 533 000c 8E46     		mov	lr, r1
 126:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 127:src/falafel/falafel.c ****   } else if (buffer_length < packet->data_length) {
 534              		.loc 1 127 10 is_stmt 1 view .LVU143
 535              		.loc 1 127 36 is_stmt 0 view .LVU144
 536 000e C389     		ldrh	r3, [r0, #14]
 537              		.loc 1 127 13 view .LVU145
 538 0010 9342     		cmp	r3, r2
 539 0012 0DD8     		bhi	.L40
 128:src/falafel/falafel.c ****     status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 129:src/falafel/falafel.c ****   } else if (packet->data_flag == 0) {
 540              		.loc 1 129 10 is_stmt 1 view .LVU146
 541              		.loc 1 129 20 is_stmt 0 view .LVU147
 542 0014 8178     		ldrb	r1, [r0, #2]	@ zero_extendqisi2
 543              	.LVL49:
ARM GAS  /tmp/ccy3FgJK.s 			page 13


 544              		.loc 1 129 13 view .LVU148
 545 0016 69B1     		cbz	r1, .L41
 130:src/falafel/falafel.c ****     status = PACKET_ERROR_NO_DATA_FLAG;
 131:src/falafel/falafel.c ****   } else if (packet->data_length == 0 || !packet->data) {
 546              		.loc 1 131 10 is_stmt 1 view .LVU149
 547              		.loc 1 131 13 is_stmt 0 view .LVU150
 548 0018 73B1     		cbz	r3, .L42
 549              		.loc 1 131 49 discriminator 1 view .LVU151
 550 001a 0269     		ldr	r2, [r0, #16]
 551              	.LVL50:
 552              		.loc 1 131 39 discriminator 1 view .LVU152
 553 001c 72B1     		cbz	r2, .L43
 554              	.LBB2:
 132:src/falafel/falafel.c ****     status = PACKET_ERROR_NO_DATA;
 133:src/falafel/falafel.c ****   } else {
 134:src/falafel/falafel.c ****     memcpy_s_err_t memcpy_status = memcpy_s(buffer, buffer_length, packet->data, packet->data_lengt
 555              		.loc 1 134 5 is_stmt 1 view .LVU153
 556              		.loc 1 134 36 is_stmt 0 view .LVU154
 557 001e 6146     		mov	r1, ip
 558 0020 7046     		mov	r0, lr
 559              	.LVL51:
 560              		.loc 1 134 36 view .LVU155
 561 0022 FFF7FEFF 		bl	memcpy_s
 562              	.LVL52:
 135:src/falafel/falafel.c ****     if (memcpy_status != MEMCPY_S_OK) {
 563              		.loc 1 135 5 is_stmt 1 view .LVU156
 564              		.loc 1 135 8 is_stmt 0 view .LVU157
 565 0026 20B1     		cbz	r0, .L38
 136:src/falafel/falafel.c ****       status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 566              		.loc 1 136 14 view .LVU158
 567 0028 0320     		movs	r0, #3
 568              	.LVL53:
 569              		.loc 1 136 14 view .LVU159
 570 002a 02E0     		b	.L38
 571              	.LVL54:
 572              	.L39:
 573              	.LCFI1:
 574              		.cfi_def_cfa_offset 0
 575              		.cfi_restore 3
 576              		.cfi_restore 14
 577              		.loc 1 136 14 view .LVU160
 578              	.LBE2:
 126:src/falafel/falafel.c ****   } else if (buffer_length < packet->data_length) {
 579              		.loc 1 126 12 view .LVU161
 580 002c 0120     		movs	r0, #1
 581              	.LVL55:
 137:src/falafel/falafel.c ****     }
 138:src/falafel/falafel.c ****   }
 139:src/falafel/falafel.c ****   return status;
 582              		.loc 1 139 3 is_stmt 1 view .LVU162
 140:src/falafel/falafel.c **** }
 583              		.loc 1 140 1 is_stmt 0 view .LVU163
 584 002e 7047     		bx	lr
 585              	.LVL56:
 586              	.L40:
 587              	.LCFI2:
 588              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccy3FgJK.s 			page 14


 589              		.cfi_offset 3, -8
 590              		.cfi_offset 14, -4
 128:src/falafel/falafel.c ****   } else if (packet->data_flag == 0) {
 591              		.loc 1 128 12 view .LVU164
 592 0030 0320     		movs	r0, #3
 593              	.LVL57:
 594              	.L38:
 139:src/falafel/falafel.c **** }
 595              		.loc 1 139 3 is_stmt 1 view .LVU165
 596              		.loc 1 140 1 is_stmt 0 view .LVU166
 597 0032 08BD     		pop	{r3, pc}
 598              	.LVL58:
 599              	.L41:
 130:src/falafel/falafel.c ****   } else if (packet->data_length == 0 || !packet->data) {
 600              		.loc 1 130 12 view .LVU167
 601 0034 0820     		movs	r0, #8
 602              	.LVL59:
 130:src/falafel/falafel.c ****   } else if (packet->data_length == 0 || !packet->data) {
 603              		.loc 1 130 12 view .LVU168
 604 0036 FCE7     		b	.L38
 605              	.LVL60:
 606              	.L42:
 132:src/falafel/falafel.c ****   } else {
 607              		.loc 1 132 12 view .LVU169
 608 0038 0720     		movs	r0, #7
 609              	.LVL61:
 132:src/falafel/falafel.c ****   } else {
 610              		.loc 1 132 12 view .LVU170
 611 003a FAE7     		b	.L38
 612              	.LVL62:
 613              	.L43:
 132:src/falafel/falafel.c ****   } else {
 614              		.loc 1 132 12 view .LVU171
 615 003c 0720     		movs	r0, #7
 616              	.LVL63:
 132:src/falafel/falafel.c ****   } else {
 617              		.loc 1 132 12 view .LVU172
 618 003e F8E7     		b	.L38
 619              		.cfi_endproc
 620              	.LFE15:
 622              		.section	.text.packet_set_data,"ax",%progbits
 623              		.align	1
 624              		.global	packet_set_data
 625              		.syntax unified
 626              		.thumb
 627              		.thumb_func
 629              	packet_set_data:
 630              	.LVL64:
 631              	.LFB16:
 141:src/falafel/falafel.c **** 
 142:src/falafel/falafel.c **** packet_err_t packet_set_data(packet_t *packet, const uint8_t *buffer, const uint16_t length) {
 632              		.loc 1 142 94 is_stmt 1 view -0
 633              		.cfi_startproc
 634              		@ args = 0, pretend = 0, frame = 0
 635              		@ frame_needed = 0, uses_anonymous_args = 0
 143:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 636              		.loc 1 143 3 view .LVU174
ARM GAS  /tmp/ccy3FgJK.s 			page 15


 144:src/falafel/falafel.c ****   if (!packet || !buffer) {
 637              		.loc 1 144 3 view .LVU175
 638              		.loc 1 144 6 is_stmt 0 view .LVU176
 639 0000 0029     		cmp	r1, #0
 640 0002 18BF     		it	ne
 641 0004 0028     		cmpne	r0, #0
 642 0006 0DD0     		beq	.L51
 142:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 643              		.loc 1 142 94 view .LVU177
 644 0008 38B5     		push	{r3, r4, r5, lr}
 645              	.LCFI3:
 646              		.cfi_def_cfa_offset 16
 647              		.cfi_offset 3, -16
 648              		.cfi_offset 4, -12
 649              		.cfi_offset 5, -8
 650              		.cfi_offset 14, -4
 651 000a 1446     		mov	r4, r2
 652 000c 0546     		mov	r5, r0
 653 000e 0A46     		mov	r2, r1
 654              	.LVL65:
 145:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 146:src/falafel/falafel.c ****   } else if (length > PACKET_MAX_DATA_LENGTH) {
 655              		.loc 1 146 10 is_stmt 1 view .LVU178
 147:src/falafel/falafel.c ****     status = PACKET_ERROR_INVALID_DATA_LENGTH;
 148:src/falafel/falafel.c ****   } else if (!packet->data) {
 656              		.loc 1 148 10 view .LVU179
 657              		.loc 1 148 21 is_stmt 0 view .LVU180
 658 0010 0069     		ldr	r0, [r0, #16]
 659              	.LVL66:
 660              		.loc 1 148 13 view .LVU181
 661 0012 48B1     		cbz	r0, .L52
 662              	.LBB3:
 149:src/falafel/falafel.c ****     status = PACKET_ERROR_MALFORMED_PACKET;
 150:src/falafel/falafel.c ****   } else {
 151:src/falafel/falafel.c ****     memcpy_s_err_t memcpy_status = memcpy_s(packet->data, PACKET_MAX_DATA_LENGTH, buffer, length);
 663              		.loc 1 151 5 is_stmt 1 view .LVU182
 664              		.loc 1 151 36 is_stmt 0 view .LVU183
 665 0014 2346     		mov	r3, r4
 666 0016 4FF6FF71 		movw	r1, #65535
 667              	.LVL67:
 668              		.loc 1 151 36 view .LVU184
 669 001a FFF7FEFF 		bl	memcpy_s
 670              	.LVL68:
 152:src/falafel/falafel.c ****     if (memcpy_status != MEMCPY_S_OK) {
 671              		.loc 1 152 5 is_stmt 1 view .LVU185
 672              		.loc 1 152 8 is_stmt 0 view .LVU186
 673 001e 28B9     		cbnz	r0, .L53
 153:src/falafel/falafel.c ****       status = PACKET_ERROR_MEMCPY_ERROR;
 154:src/falafel/falafel.c ****     } else {
 155:src/falafel/falafel.c ****       packet->data_length = length;
 674              		.loc 1 155 7 is_stmt 1 view .LVU187
 675              		.loc 1 155 27 is_stmt 0 view .LVU188
 676 0020 EC81     		strh	r4, [r5, #14]	@ movhi
 677              	.LVL69:
 678              	.L50:
 679              		.loc 1 155 27 view .LVU189
 680              	.LBE3:
ARM GAS  /tmp/ccy3FgJK.s 			page 16


 156:src/falafel/falafel.c ****     }
 157:src/falafel/falafel.c ****   }
 158:src/falafel/falafel.c ****   return status;
 681              		.loc 1 158 3 is_stmt 1 view .LVU190
 159:src/falafel/falafel.c **** }
 682              		.loc 1 159 1 is_stmt 0 view .LVU191
 683 0022 38BD     		pop	{r3, r4, r5, pc}
 684              	.LVL70:
 685              	.L51:
 686              	.LCFI4:
 687              		.cfi_def_cfa_offset 0
 688              		.cfi_restore 3
 689              		.cfi_restore 4
 690              		.cfi_restore 5
 691              		.cfi_restore 14
 145:src/falafel/falafel.c ****   } else if (length > PACKET_MAX_DATA_LENGTH) {
 692              		.loc 1 145 12 view .LVU192
 693 0024 0120     		movs	r0, #1
 694              	.LVL71:
 158:src/falafel/falafel.c **** }
 695              		.loc 1 158 3 is_stmt 1 view .LVU193
 696              		.loc 1 159 1 is_stmt 0 view .LVU194
 697 0026 7047     		bx	lr
 698              	.LVL72:
 699              	.L52:
 700              	.LCFI5:
 701              		.cfi_def_cfa_offset 16
 702              		.cfi_offset 3, -16
 703              		.cfi_offset 4, -12
 704              		.cfi_offset 5, -8
 705              		.cfi_offset 14, -4
 149:src/falafel/falafel.c ****   } else {
 706              		.loc 1 149 12 view .LVU195
 707 0028 0620     		movs	r0, #6
 708 002a FAE7     		b	.L50
 709              	.LVL73:
 710              	.L53:
 711              	.LBB4:
 153:src/falafel/falafel.c ****     } else {
 712              		.loc 1 153 14 view .LVU196
 713 002c 0420     		movs	r0, #4
 714              	.LVL74:
 153:src/falafel/falafel.c ****     } else {
 715              		.loc 1 153 14 view .LVU197
 716 002e F8E7     		b	.L50
 717              	.LBE4:
 718              		.cfi_endproc
 719              	.LFE16:
 721              		.section	.text.packet_get_crc16,"ax",%progbits
 722              		.align	1
 723              		.global	packet_get_crc16
 724              		.syntax unified
 725              		.thumb
 726              		.thumb_func
 728              	packet_get_crc16:
 729              	.LVL75:
 730              	.LFB17:
ARM GAS  /tmp/ccy3FgJK.s 			page 17


 160:src/falafel/falafel.c **** 
 161:src/falafel/falafel.c **** packet_err_t packet_get_crc16(const packet_t *packet, uint16_t *crc) {
 731              		.loc 1 161 70 is_stmt 1 view -0
 732              		.cfi_startproc
 733              		@ args = 0, pretend = 0, frame = 0
 734              		@ frame_needed = 0, uses_anonymous_args = 0
 735              		@ link register save eliminated.
 162:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 736              		.loc 1 162 3 view .LVU199
 163:src/falafel/falafel.c ****   if (!packet || !crc) {
 737              		.loc 1 163 3 view .LVU200
 738              		.loc 1 163 6 is_stmt 0 view .LVU201
 739 0000 0029     		cmp	r1, #0
 740 0002 18BF     		it	ne
 741 0004 0028     		cmpne	r0, #0
 742 0006 03D0     		beq	.L60
 164:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 165:src/falafel/falafel.c ****   } else {
 166:src/falafel/falafel.c ****     *crc = packet->crc16;
 743              		.loc 1 166 5 is_stmt 1 view .LVU202
 744              		.loc 1 166 18 is_stmt 0 view .LVU203
 745 0008 828A     		ldrh	r2, [r0, #20]
 746              		.loc 1 166 10 view .LVU204
 747 000a 0A80     		strh	r2, [r1]	@ movhi
 162:src/falafel/falafel.c ****   if (!packet || !crc) {
 748              		.loc 1 162 16 view .LVU205
 749 000c 0020     		movs	r0, #0
 750              	.LVL76:
 162:src/falafel/falafel.c ****   if (!packet || !crc) {
 751              		.loc 1 162 16 view .LVU206
 752 000e 7047     		bx	lr
 753              	.LVL77:
 754              	.L60:
 164:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 755              		.loc 1 164 12 view .LVU207
 756 0010 0120     		movs	r0, #1
 757              	.LVL78:
 167:src/falafel/falafel.c ****   }
 168:src/falafel/falafel.c ****   return status;
 758              		.loc 1 168 3 is_stmt 1 view .LVU208
 169:src/falafel/falafel.c **** }
 759              		.loc 1 169 1 is_stmt 0 view .LVU209
 760 0012 7047     		bx	lr
 761              		.cfi_endproc
 762              	.LFE17:
 764              		.section	.text.packet_get_service,"ax",%progbits
 765              		.align	1
 766              		.global	packet_get_service
 767              		.syntax unified
 768              		.thumb
 769              		.thumb_func
 771              	packet_get_service:
 772              	.LVL79:
 773              	.LFB18:
 170:src/falafel/falafel.c **** 
 171:src/falafel/falafel.c **** packet_err_t packet_get_service(const packet_t *packet, uint8_t *service) {
 774              		.loc 1 171 75 is_stmt 1 view -0
ARM GAS  /tmp/ccy3FgJK.s 			page 18


 775              		.cfi_startproc
 776              		@ args = 0, pretend = 0, frame = 0
 777              		@ frame_needed = 0, uses_anonymous_args = 0
 778              		@ link register save eliminated.
 172:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 779              		.loc 1 172 3 view .LVU211
 173:src/falafel/falafel.c ****   if (!packet || !service) {
 780              		.loc 1 173 3 view .LVU212
 781              		.loc 1 173 6 is_stmt 0 view .LVU213
 782 0000 0029     		cmp	r1, #0
 783 0002 18BF     		it	ne
 784 0004 0028     		cmpne	r0, #0
 785 0006 03D0     		beq	.L63
 174:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 175:src/falafel/falafel.c ****   } else {
 176:src/falafel/falafel.c ****     *service = packet->service;
 786              		.loc 1 176 5 is_stmt 1 view .LVU214
 787              		.loc 1 176 22 is_stmt 0 view .LVU215
 788 0008 027B     		ldrb	r2, [r0, #12]	@ zero_extendqisi2
 789              		.loc 1 176 14 view .LVU216
 790 000a 0A70     		strb	r2, [r1]
 172:src/falafel/falafel.c ****   if (!packet || !service) {
 791              		.loc 1 172 16 view .LVU217
 792 000c 0020     		movs	r0, #0
 793              	.LVL80:
 172:src/falafel/falafel.c ****   if (!packet || !service) {
 794              		.loc 1 172 16 view .LVU218
 795 000e 7047     		bx	lr
 796              	.LVL81:
 797              	.L63:
 174:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 798              		.loc 1 174 12 view .LVU219
 799 0010 0120     		movs	r0, #1
 800              	.LVL82:
 177:src/falafel/falafel.c ****   }
 178:src/falafel/falafel.c ****   return status;
 801              		.loc 1 178 3 is_stmt 1 view .LVU220
 179:src/falafel/falafel.c **** }
 802              		.loc 1 179 1 is_stmt 0 view .LVU221
 803 0012 7047     		bx	lr
 804              		.cfi_endproc
 805              	.LFE18:
 807              		.section	.text.packet_set_service,"ax",%progbits
 808              		.align	1
 809              		.global	packet_set_service
 810              		.syntax unified
 811              		.thumb
 812              		.thumb_func
 814              	packet_set_service:
 815              	.LVL83:
 816              	.LFB19:
 180:src/falafel/falafel.c **** 
 181:src/falafel/falafel.c **** packet_err_t packet_set_service(packet_t *packet, uint8_t service) {
 817              		.loc 1 181 68 is_stmt 1 view -0
 818              		.cfi_startproc
 819              		@ args = 0, pretend = 0, frame = 0
 820              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccy3FgJK.s 			page 19


 821              		@ link register save eliminated.
 182:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 822              		.loc 1 182 3 view .LVU223
 183:src/falafel/falafel.c ****   if (!packet) {
 823              		.loc 1 183 3 view .LVU224
 824              		.loc 1 183 6 is_stmt 0 view .LVU225
 825 0000 10B1     		cbz	r0, .L66
 184:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 185:src/falafel/falafel.c ****   } else {
 186:src/falafel/falafel.c ****     packet->service = service;
 826              		.loc 1 186 5 is_stmt 1 view .LVU226
 827              		.loc 1 186 21 is_stmt 0 view .LVU227
 828 0002 0173     		strb	r1, [r0, #12]
 182:src/falafel/falafel.c ****   if (!packet) {
 829              		.loc 1 182 16 view .LVU228
 830 0004 0020     		movs	r0, #0
 831              	.LVL84:
 182:src/falafel/falafel.c ****   if (!packet) {
 832              		.loc 1 182 16 view .LVU229
 833 0006 7047     		bx	lr
 834              	.LVL85:
 835              	.L66:
 184:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 836              		.loc 1 184 12 view .LVU230
 837 0008 0120     		movs	r0, #1
 838              	.LVL86:
 187:src/falafel/falafel.c ****   }
 188:src/falafel/falafel.c ****   return status;
 839              		.loc 1 188 3 is_stmt 1 view .LVU231
 189:src/falafel/falafel.c **** }
 840              		.loc 1 189 1 is_stmt 0 view .LVU232
 841 000a 7047     		bx	lr
 842              		.cfi_endproc
 843              	.LFE19:
 845              		.section	.text.packet_get_subservice,"ax",%progbits
 846              		.align	1
 847              		.global	packet_get_subservice
 848              		.syntax unified
 849              		.thumb
 850              		.thumb_func
 852              	packet_get_subservice:
 853              	.LVL87:
 854              	.LFB20:
 190:src/falafel/falafel.c **** 
 191:src/falafel/falafel.c **** packet_err_t packet_get_subservice(const packet_t *packet, uint8_t *subservice) {
 855              		.loc 1 191 81 is_stmt 1 view -0
 856              		.cfi_startproc
 857              		@ args = 0, pretend = 0, frame = 0
 858              		@ frame_needed = 0, uses_anonymous_args = 0
 859              		@ link register save eliminated.
 192:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 860              		.loc 1 192 3 view .LVU234
 193:src/falafel/falafel.c ****   if (!packet || !subservice) {
 861              		.loc 1 193 3 view .LVU235
 862              		.loc 1 193 6 is_stmt 0 view .LVU236
 863 0000 0029     		cmp	r1, #0
 864 0002 18BF     		it	ne
ARM GAS  /tmp/ccy3FgJK.s 			page 20


 865 0004 0028     		cmpne	r0, #0
 866 0006 03D0     		beq	.L69
 194:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 195:src/falafel/falafel.c ****   } else {
 196:src/falafel/falafel.c ****     *subservice = packet->subservice;
 867              		.loc 1 196 5 is_stmt 1 view .LVU237
 868              		.loc 1 196 25 is_stmt 0 view .LVU238
 869 0008 427B     		ldrb	r2, [r0, #13]	@ zero_extendqisi2
 870              		.loc 1 196 17 view .LVU239
 871 000a 0A70     		strb	r2, [r1]
 192:src/falafel/falafel.c ****   if (!packet || !subservice) {
 872              		.loc 1 192 16 view .LVU240
 873 000c 0020     		movs	r0, #0
 874              	.LVL88:
 192:src/falafel/falafel.c ****   if (!packet || !subservice) {
 875              		.loc 1 192 16 view .LVU241
 876 000e 7047     		bx	lr
 877              	.LVL89:
 878              	.L69:
 194:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 879              		.loc 1 194 12 view .LVU242
 880 0010 0120     		movs	r0, #1
 881              	.LVL90:
 197:src/falafel/falafel.c ****   }
 198:src/falafel/falafel.c ****   return status;
 882              		.loc 1 198 3 is_stmt 1 view .LVU243
 199:src/falafel/falafel.c **** }
 883              		.loc 1 199 1 is_stmt 0 view .LVU244
 884 0012 7047     		bx	lr
 885              		.cfi_endproc
 886              	.LFE20:
 888              		.section	.text.packet_set_subservice,"ax",%progbits
 889              		.align	1
 890              		.global	packet_set_subservice
 891              		.syntax unified
 892              		.thumb
 893              		.thumb_func
 895              	packet_set_subservice:
 896              	.LVL91:
 897              	.LFB21:
 200:src/falafel/falafel.c **** 
 201:src/falafel/falafel.c **** packet_err_t packet_set_subservice(packet_t *packet, uint8_t subservice) {
 898              		.loc 1 201 74 is_stmt 1 view -0
 899              		.cfi_startproc
 900              		@ args = 0, pretend = 0, frame = 0
 901              		@ frame_needed = 0, uses_anonymous_args = 0
 902              		@ link register save eliminated.
 202:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 903              		.loc 1 202 3 view .LVU246
 203:src/falafel/falafel.c ****   if (!packet) {
 904              		.loc 1 203 3 view .LVU247
 905              		.loc 1 203 6 is_stmt 0 view .LVU248
 906 0000 10B1     		cbz	r0, .L72
 204:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 205:src/falafel/falafel.c ****   } else {
 206:src/falafel/falafel.c ****     packet->subservice = subservice;
 907              		.loc 1 206 5 is_stmt 1 view .LVU249
ARM GAS  /tmp/ccy3FgJK.s 			page 21


 908              		.loc 1 206 24 is_stmt 0 view .LVU250
 909 0002 4173     		strb	r1, [r0, #13]
 202:src/falafel/falafel.c ****   if (!packet) {
 910              		.loc 1 202 16 view .LVU251
 911 0004 0020     		movs	r0, #0
 912              	.LVL92:
 202:src/falafel/falafel.c ****   if (!packet) {
 913              		.loc 1 202 16 view .LVU252
 914 0006 7047     		bx	lr
 915              	.LVL93:
 916              	.L72:
 204:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 917              		.loc 1 204 12 view .LVU253
 918 0008 0120     		movs	r0, #1
 919              	.LVL94:
 207:src/falafel/falafel.c ****   }
 208:src/falafel/falafel.c ****   return status;
 920              		.loc 1 208 3 is_stmt 1 view .LVU254
 209:src/falafel/falafel.c **** }
 921              		.loc 1 209 1 is_stmt 0 view .LVU255
 922 000a 7047     		bx	lr
 923              		.cfi_endproc
 924              	.LFE21:
 926              		.section	.text.uint32_to_uint8_array,"ax",%progbits
 927              		.align	1
 928              		.global	uint32_to_uint8_array
 929              		.syntax unified
 930              		.thumb
 931              		.thumb_func
 933              	uint32_to_uint8_array:
 934              	.LVL95:
 935              	.LFB22:
 210:src/falafel/falafel.c **** 
 211:src/falafel/falafel.c **** bool uint32_to_uint8_array(uint32_t value, uint8_t *array) {
 936              		.loc 1 211 60 is_stmt 1 view -0
 937              		.cfi_startproc
 938              		@ args = 0, pretend = 0, frame = 0
 939              		@ frame_needed = 0, uses_anonymous_args = 0
 940              		@ link register save eliminated.
 212:src/falafel/falafel.c ****   bool error = false;
 941              		.loc 1 212 3 view .LVU257
 213:src/falafel/falafel.c ****   if (!array) {
 942              		.loc 1 213 3 view .LVU258
 943              		.loc 1 213 6 is_stmt 0 view .LVU259
 944 0000 41B1     		cbz	r1, .L75
 214:src/falafel/falafel.c ****     error = true;
 215:src/falafel/falafel.c ****   } else {
 216:src/falafel/falafel.c ****     array[0] = (value >> 24) & 0xFF;
 945              		.loc 1 216 5 is_stmt 1 view .LVU260
 946              		.loc 1 216 23 is_stmt 0 view .LVU261
 947 0002 020E     		lsrs	r2, r0, #24
 948              		.loc 1 216 14 view .LVU262
 949 0004 0A70     		strb	r2, [r1]
 217:src/falafel/falafel.c ****     array[1] = (value >> 16) & 0xFF;
 950              		.loc 1 217 5 is_stmt 1 view .LVU263
 951              		.loc 1 217 23 is_stmt 0 view .LVU264
 952 0006 020C     		lsrs	r2, r0, #16
ARM GAS  /tmp/ccy3FgJK.s 			page 22


 953              		.loc 1 217 14 view .LVU265
 954 0008 4A70     		strb	r2, [r1, #1]
 218:src/falafel/falafel.c ****     array[2] = (value >> 8) & 0xFF;
 955              		.loc 1 218 5 is_stmt 1 view .LVU266
 956              		.loc 1 218 23 is_stmt 0 view .LVU267
 957 000a 020A     		lsrs	r2, r0, #8
 958              		.loc 1 218 14 view .LVU268
 959 000c 8A70     		strb	r2, [r1, #2]
 219:src/falafel/falafel.c ****     array[3] = value & 0xFF;
 960              		.loc 1 219 5 is_stmt 1 view .LVU269
 961              		.loc 1 219 14 is_stmt 0 view .LVU270
 962 000e C870     		strb	r0, [r1, #3]
 212:src/falafel/falafel.c ****   if (!array) {
 963              		.loc 1 212 8 view .LVU271
 964 0010 0020     		movs	r0, #0
 965              	.LVL96:
 212:src/falafel/falafel.c ****   if (!array) {
 966              		.loc 1 212 8 view .LVU272
 967 0012 7047     		bx	lr
 968              	.LVL97:
 969              	.L75:
 214:src/falafel/falafel.c ****   } else {
 970              		.loc 1 214 11 view .LVU273
 971 0014 0120     		movs	r0, #1
 972              	.LVL98:
 220:src/falafel/falafel.c ****   }
 221:src/falafel/falafel.c ****   return error;
 973              		.loc 1 221 3 is_stmt 1 view .LVU274
 222:src/falafel/falafel.c **** }
 974              		.loc 1 222 1 is_stmt 0 view .LVU275
 975 0016 7047     		bx	lr
 976              		.cfi_endproc
 977              	.LFE22:
 979              		.section	.text.uint8_array_to_uint32,"ax",%progbits
 980              		.align	1
 981              		.global	uint8_array_to_uint32
 982              		.syntax unified
 983              		.thumb
 984              		.thumb_func
 986              	uint8_array_to_uint32:
 987              	.LVL99:
 988              	.LFB23:
 223:src/falafel/falafel.c **** 
 224:src/falafel/falafel.c **** bool uint8_array_to_uint32(const uint8_t *array, uint32_t *value) {
 989              		.loc 1 224 67 is_stmt 1 view -0
 990              		.cfi_startproc
 991              		@ args = 0, pretend = 0, frame = 0
 992              		@ frame_needed = 0, uses_anonymous_args = 0
 993              		@ link register save eliminated.
 225:src/falafel/falafel.c ****   bool error = false;
 994              		.loc 1 225 3 view .LVU277
 226:src/falafel/falafel.c ****   if (!array || !value) {
 995              		.loc 1 226 3 view .LVU278
 996              		.loc 1 226 7 is_stmt 0 view .LVU279
 997 0000 0246     		mov	r2, r0
 998              		.loc 1 226 17 view .LVU280
 999 0002 8C46     		mov	ip, r1
ARM GAS  /tmp/ccy3FgJK.s 			page 23


 1000              		.loc 1 226 6 view .LVU281
 1001 0004 0029     		cmp	r1, #0
 1002 0006 18BF     		it	ne
 1003 0008 0028     		cmpne	r0, #0
 1004 000a 0CBF     		ite	eq
 1005 000c 0120     		moveq	r0, #1
 1006              	.LVL100:
 1007              		.loc 1 226 6 view .LVU282
 1008 000e 0020     		movne	r0, #0
 1009 0010 0BD0     		beq	.L77
 227:src/falafel/falafel.c ****     error = true;
 228:src/falafel/falafel.c ****   } else {
 229:src/falafel/falafel.c ****     *value = (array[0] << 24) | (array[1] << 16) | (array[2] << 8) | array[3];
 1010              		.loc 1 229 5 is_stmt 1 view .LVU283
 1011              		.loc 1 229 20 is_stmt 0 view .LVU284
 1012 0012 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 1013              	.LVL101:
 1014              		.loc 1 229 39 view .LVU285
 1015 0014 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 1016              		.loc 1 229 43 view .LVU286
 1017 0016 1B04     		lsls	r3, r3, #16
 1018              		.loc 1 229 31 view .LVU287
 1019 0018 43EA0163 		orr	r3, r3, r1, lsl #24
 1020              		.loc 1 229 58 view .LVU288
 1021 001c 9178     		ldrb	r1, [r2, #2]	@ zero_extendqisi2
 1022              		.loc 1 229 50 view .LVU289
 1023 001e 43EA0123 		orr	r3, r3, r1, lsl #8
 1024              		.loc 1 229 75 view .LVU290
 1025 0022 D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 1026              	.LVL102:
 1027              		.loc 1 229 68 view .LVU291
 1028 0024 1343     		orrs	r3, r3, r2
 1029              		.loc 1 229 12 view .LVU292
 1030 0026 CCF80030 		str	r3, [ip]
 1031              	.L77:
 1032              	.LVL103:
 230:src/falafel/falafel.c ****   }
 231:src/falafel/falafel.c ****   return error;
 1033              		.loc 1 231 3 is_stmt 1 view .LVU293
 232:src/falafel/falafel.c **** }
 1034              		.loc 1 232 1 is_stmt 0 view .LVU294
 1035 002a 7047     		bx	lr
 1036              		.cfi_endproc
 1037              	.LFE23:
 1039              		.section	.text.uint16_to_uint8_array,"ax",%progbits
 1040              		.align	1
 1041              		.global	uint16_to_uint8_array
 1042              		.syntax unified
 1043              		.thumb
 1044              		.thumb_func
 1046              	uint16_to_uint8_array:
 1047              	.LVL104:
 1048              	.LFB24:
 233:src/falafel/falafel.c **** 
 234:src/falafel/falafel.c **** bool uint16_to_uint8_array(uint16_t value, uint8_t *array) {
 1049              		.loc 1 234 60 is_stmt 1 view -0
 1050              		.cfi_startproc
ARM GAS  /tmp/ccy3FgJK.s 			page 24


 1051              		@ args = 0, pretend = 0, frame = 0
 1052              		@ frame_needed = 0, uses_anonymous_args = 0
 1053              		@ link register save eliminated.
 235:src/falafel/falafel.c ****   bool error = false;
 1054              		.loc 1 235 3 view .LVU296
 236:src/falafel/falafel.c ****   if (!array) {
 1055              		.loc 1 236 3 view .LVU297
 1056              		.loc 1 236 6 is_stmt 0 view .LVU298
 1057 0000 21B1     		cbz	r1, .L80
 237:src/falafel/falafel.c ****     error = true;
 238:src/falafel/falafel.c ****   } else {
 239:src/falafel/falafel.c ****     array[0] = (value >> 8) & 0xFF;
 1058              		.loc 1 239 5 is_stmt 1 view .LVU299
 1059              		.loc 1 239 14 is_stmt 0 view .LVU300
 1060 0002 020A     		lsrs	r2, r0, #8
 1061 0004 0A70     		strb	r2, [r1]
 240:src/falafel/falafel.c ****     array[1] = value & 0xFF;
 1062              		.loc 1 240 5 is_stmt 1 view .LVU301
 1063              		.loc 1 240 14 is_stmt 0 view .LVU302
 1064 0006 4870     		strb	r0, [r1, #1]
 235:src/falafel/falafel.c ****   if (!array) {
 1065              		.loc 1 235 8 view .LVU303
 1066 0008 0020     		movs	r0, #0
 1067              	.LVL105:
 235:src/falafel/falafel.c ****   if (!array) {
 1068              		.loc 1 235 8 view .LVU304
 1069 000a 7047     		bx	lr
 1070              	.LVL106:
 1071              	.L80:
 237:src/falafel/falafel.c ****     error = true;
 1072              		.loc 1 237 11 view .LVU305
 1073 000c 0120     		movs	r0, #1
 1074              	.LVL107:
 241:src/falafel/falafel.c ****   }
 242:src/falafel/falafel.c ****   return error;
 1075              		.loc 1 242 3 is_stmt 1 view .LVU306
 243:src/falafel/falafel.c **** }
 1076              		.loc 1 243 1 is_stmt 0 view .LVU307
 1077 000e 7047     		bx	lr
 1078              		.cfi_endproc
 1079              	.LFE24:
 1081              		.section	.text.uint8_array_to_uint16,"ax",%progbits
 1082              		.align	1
 1083              		.global	uint8_array_to_uint16
 1084              		.syntax unified
 1085              		.thumb
 1086              		.thumb_func
 1088              	uint8_array_to_uint16:
 1089              	.LVL108:
 1090              	.LFB25:
 244:src/falafel/falafel.c **** 
 245:src/falafel/falafel.c **** bool uint8_array_to_uint16(const uint8_t *array, uint16_t *value) {
 1091              		.loc 1 245 67 is_stmt 1 view -0
 1092              		.cfi_startproc
 1093              		@ args = 0, pretend = 0, frame = 0
 1094              		@ frame_needed = 0, uses_anonymous_args = 0
 1095              		@ link register save eliminated.
ARM GAS  /tmp/ccy3FgJK.s 			page 25


 246:src/falafel/falafel.c ****   bool error = false;
 1096              		.loc 1 246 3 view .LVU309
 247:src/falafel/falafel.c ****   if (!array || !value) {
 1097              		.loc 1 247 3 view .LVU310
 1098              		.loc 1 247 7 is_stmt 0 view .LVU311
 1099 0000 0346     		mov	r3, r0
 1100              		.loc 1 247 17 view .LVU312
 1101 0002 0A46     		mov	r2, r1
 1102              		.loc 1 247 6 view .LVU313
 1103 0004 0029     		cmp	r1, #0
 1104 0006 18BF     		it	ne
 1105 0008 0028     		cmpne	r0, #0
 1106 000a 0CBF     		ite	eq
 1107 000c 0120     		moveq	r0, #1
 1108              	.LVL109:
 1109              		.loc 1 247 6 view .LVU314
 1110 000e 0020     		movne	r0, #0
 1111 0010 04D0     		beq	.L82
 248:src/falafel/falafel.c ****     error = true;
 249:src/falafel/falafel.c ****   } else {
 250:src/falafel/falafel.c ****     *value = (array[0] << 8) | array[1];
 1112              		.loc 1 250 5 is_stmt 1 view .LVU315
 1113              		.loc 1 250 20 is_stmt 0 view .LVU316
 1114 0012 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 1115              	.LVL110:
 1116              		.loc 1 250 37 view .LVU317
 1117 0014 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1118              	.LVL111:
 1119              		.loc 1 250 30 view .LVU318
 1120 0016 43EA0123 		orr	r3, r3, r1, lsl #8
 1121              		.loc 1 250 12 view .LVU319
 1122 001a 1380     		strh	r3, [r2]	@ movhi
 1123              	.L82:
 1124              	.LVL112:
 251:src/falafel/falafel.c ****   }
 252:src/falafel/falafel.c ****   return error;
 1125              		.loc 1 252 3 is_stmt 1 view .LVU320
 253:src/falafel/falafel.c **** }
 1126              		.loc 1 253 1 is_stmt 0 view .LVU321
 1127 001c 7047     		bx	lr
 1128              		.cfi_endproc
 1129              	.LFE25:
 1131              		.section	.text.packet_serialize,"ax",%progbits
 1132              		.align	1
 1133              		.global	packet_serialize
 1134              		.syntax unified
 1135              		.thumb
 1136              		.thumb_func
 1138              	packet_serialize:
 1139              	.LVL113:
 1140              	.LFB26:
 254:src/falafel/falafel.c **** 
 255:src/falafel/falafel.c **** packet_err_t packet_serialize(packet_t *packet, uint8_t *buffer, uint32_t buffer_length, uint32_t *
 1141              		.loc 1 255 115 is_stmt 1 view -0
 1142              		.cfi_startproc
 1143              		@ args = 0, pretend = 0, frame = 0
 1144              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccy3FgJK.s 			page 26


 1145              		.loc 1 255 115 is_stmt 0 view .LVU323
 1146 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1147              	.LCFI6:
 1148              		.cfi_def_cfa_offset 24
 1149              		.cfi_offset 4, -24
 1150              		.cfi_offset 5, -20
 1151              		.cfi_offset 6, -16
 1152              		.cfi_offset 7, -12
 1153              		.cfi_offset 8, -8
 1154              		.cfi_offset 14, -4
 256:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 1155              		.loc 1 256 3 is_stmt 1 view .LVU324
 1156              	.LVL114:
 257:src/falafel/falafel.c ****   if (!packet || !buffer || !bytes_written) {
 1157              		.loc 1 257 3 view .LVU325
 1158              		.loc 1 257 6 is_stmt 0 view .LVU326
 1159 0004 0029     		cmp	r1, #0
 1160 0006 18BF     		it	ne
 1161 0008 0028     		cmpne	r0, #0
 1162 000a 46D0     		beq	.L87
 1163 000c 1446     		mov	r4, r2
 1164 000e 1D46     		mov	r5, r3
 1165 0010 0646     		mov	r6, r0
 1166 0012 0F46     		mov	r7, r1
 1167              		.loc 1 257 26 discriminator 1 view .LVU327
 1168 0014 002B     		cmp	r3, #0
 1169 0016 44D0     		beq	.L88
 1170              	.LBB5:
 258:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 259:src/falafel/falafel.c ****   } else {
 260:src/falafel/falafel.c ****     uint32_t offset = 0;
 1171              		.loc 1 260 5 is_stmt 1 view .LVU328
 1172              	.LVL115:
 261:src/falafel/falafel.c ****     uint32_t required_length = 15 + (packet->data_flag == 0 ? 0 : packet->data_length) + 2; // Fixe
 1173              		.loc 1 261 5 view .LVU329
 1174              		.loc 1 261 44 is_stmt 0 view .LVU330
 1175 0018 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 1176              	.LVL116:
 1177              		.loc 1 261 88 view .LVU331
 1178 001a 2BB1     		cbz	r3, .L89
 1179              		.loc 1 261 73 discriminator 1 view .LVU332
 1180 001c C389     		ldrh	r3, [r0, #14]
 1181              		.loc 1 261 88 discriminator 1 view .LVU333
 1182 001e 1133     		adds	r3, r3, #17
 1183              	.L85:
 1184              	.LVL117:
 262:src/falafel/falafel.c ****     if (buffer_length < required_length) {
 1185              		.loc 1 262 5 is_stmt 1 discriminator 4 view .LVU334
 1186              		.loc 1 262 8 is_stmt 0 discriminator 4 view .LVU335
 1187 0020 A342     		cmp	r3, r4
 1188 0022 03D9     		bls	.L94
 263:src/falafel/falafel.c ****       status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 1189              		.loc 1 263 14 view .LVU336
 1190 0024 0324     		movs	r4, #3
 1191 0026 39E0     		b	.L84
 1192              	.LVL118:
 1193              	.L89:
ARM GAS  /tmp/ccy3FgJK.s 			page 27


 261:src/falafel/falafel.c ****     uint32_t required_length = 15 + (packet->data_flag == 0 ? 0 : packet->data_length) + 2; // Fixe
 1194              		.loc 1 261 88 view .LVU337
 1195 0028 1123     		movs	r3, #17
 1196 002a F9E7     		b	.L85
 1197              	.LVL119:
 1198              	.L94:
 264:src/falafel/falafel.c ****     } else {
 265:src/falafel/falafel.c ****       buffer[offset++] = packet->standard_version;
 1199              		.loc 1 265 7 is_stmt 1 view .LVU338
 1200              		.loc 1 265 32 is_stmt 0 view .LVU339
 1201 002c 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1202              	.LVL120:
 1203              		.loc 1 265 24 view .LVU340
 1204 002e 3B70     		strb	r3, [r7]
 266:src/falafel/falafel.c ****       buffer[offset++] = packet->type;
 1205              		.loc 1 266 7 is_stmt 1 view .LVU341
 1206              	.LVL121:
 1207              		.loc 1 266 32 is_stmt 0 view .LVU342
 1208 0030 7378     		ldrb	r3, [r6, #1]	@ zero_extendqisi2
 1209              		.loc 1 266 24 view .LVU343
 1210 0032 7B70     		strb	r3, [r7, #1]
 267:src/falafel/falafel.c ****       buffer[offset++] = packet->data_flag;
 1211              		.loc 1 267 7 is_stmt 1 view .LVU344
 1212              	.LVL122:
 1213              		.loc 1 267 32 is_stmt 0 view .LVU345
 1214 0034 B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
 1215              		.loc 1 267 24 view .LVU346
 1216 0036 BB70     		strb	r3, [r7, #2]
 268:src/falafel/falafel.c **** 
 269:src/falafel/falafel.c ****       // Serialize 4-byte id
 270:src/falafel/falafel.c ****       uint32_to_uint8_array(packet->id, &buffer[offset]);
 1217              		.loc 1 270 7 is_stmt 1 view .LVU347
 1218 0038 F91C     		adds	r1, r7, #3
 1219              	.LVL123:
 1220              		.loc 1 270 7 is_stmt 0 view .LVU348
 1221 003a 7068     		ldr	r0, [r6, #4]
 1222              	.LVL124:
 1223              		.loc 1 270 7 view .LVU349
 1224 003c FFF7FEFF 		bl	uint32_to_uint8_array
 1225              	.LVL125:
 271:src/falafel/falafel.c ****       offset += 4;
 1226              		.loc 1 271 7 is_stmt 1 view .LVU350
 272:src/falafel/falafel.c ****       // Serialize 4-byte transmit_time
 273:src/falafel/falafel.c ****       uint32_to_uint8_array(packet->transmit_time, &buffer[offset]);
 1227              		.loc 1 273 7 view .LVU351
 1228 0040 F91D     		adds	r1, r7, #7
 1229 0042 B068     		ldr	r0, [r6, #8]
 1230 0044 FFF7FEFF 		bl	uint32_to_uint8_array
 1231              	.LVL126:
 274:src/falafel/falafel.c ****       offset += 4;
 1232              		.loc 1 274 7 view .LVU352
 275:src/falafel/falafel.c ****       // Serialize 1-byte service
 276:src/falafel/falafel.c ****       buffer[offset++] = packet->service;
 1233              		.loc 1 276 7 view .LVU353
 1234              		.loc 1 276 32 is_stmt 0 view .LVU354
 1235 0048 337B     		ldrb	r3, [r6, #12]	@ zero_extendqisi2
 1236              		.loc 1 276 24 view .LVU355
ARM GAS  /tmp/ccy3FgJK.s 			page 28


 1237 004a FB72     		strb	r3, [r7, #11]
 277:src/falafel/falafel.c ****       // Serialize 1-byte subservice
 278:src/falafel/falafel.c ****       buffer[offset++] = packet->subservice;
 1238              		.loc 1 278 7 is_stmt 1 view .LVU356
 1239              	.LVL127:
 1240              		.loc 1 278 32 is_stmt 0 view .LVU357
 1241 004c 737B     		ldrb	r3, [r6, #13]	@ zero_extendqisi2
 1242              		.loc 1 278 24 view .LVU358
 1243 004e 3B73     		strb	r3, [r7, #12]
 279:src/falafel/falafel.c ****       // Serialize 2-byte data_length
 280:src/falafel/falafel.c ****       uint16_to_uint8_array(packet->data_length, &buffer[offset]);
 1244              		.loc 1 280 7 is_stmt 1 view .LVU359
 1245 0050 07F10D01 		add	r1, r7, #13
 1246 0054 F089     		ldrh	r0, [r6, #14]
 1247 0056 FFF7FEFF 		bl	uint16_to_uint8_array
 1248              	.LVL128:
 281:src/falafel/falafel.c ****       offset += 2;
 1249              		.loc 1 281 7 view .LVU360
 282:src/falafel/falafel.c **** 
 283:src/falafel/falafel.c ****       // Serialize variable-size data safely using memcpy_s
 284:src/falafel/falafel.c ****       if (packet->data_length > 0) {
 1250              		.loc 1 284 7 view .LVU361
 1251              		.loc 1 284 17 is_stmt 0 view .LVU362
 1252 005a F389     		ldrh	r3, [r6, #14]
 1253              		.loc 1 284 10 view .LVU363
 1254 005c 5BB9     		cbnz	r3, .L95
 281:src/falafel/falafel.c ****       offset += 2;
 1255              		.loc 1 281 14 view .LVU364
 1256 005e 4FF00F08 		mov	r8, #15
 1257              	.LBE5:
 256:src/falafel/falafel.c ****   if (!packet || !buffer || !bytes_written) {
 1258              		.loc 1 256 16 view .LVU365
 1259 0062 0024     		movs	r4, #0
 1260              	.LVL129:
 1261              	.L86:
 1262              	.LBB6:
 285:src/falafel/falafel.c ****         if (memcpy_s(&buffer[offset], buffer_length - offset, packet->data, packet->data_length) !=
 286:src/falafel/falafel.c ****           status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 287:src/falafel/falafel.c ****         } else {
 288:src/falafel/falafel.c ****           offset += packet->data_length;
 289:src/falafel/falafel.c ****         }
 290:src/falafel/falafel.c ****       }
 291:src/falafel/falafel.c **** 
 292:src/falafel/falafel.c ****       // Serialize 2-byte CRC16
 293:src/falafel/falafel.c ****       uint16_to_uint8_array(packet->crc16, &buffer[offset]);
 1263              		.loc 1 293 7 is_stmt 1 view .LVU366
 1264 0064 07EB0801 		add	r1, r7, r8
 1265 0068 B08A     		ldrh	r0, [r6, #20]
 1266 006a FFF7FEFF 		bl	uint16_to_uint8_array
 1267              	.LVL130:
 294:src/falafel/falafel.c ****       offset += 2;
 1268              		.loc 1 294 7 view .LVU367
 1269              		.loc 1 294 14 is_stmt 0 view .LVU368
 1270 006e 08F10203 		add	r3, r8, #2
 1271              	.LVL131:
 295:src/falafel/falafel.c **** 
 296:src/falafel/falafel.c ****       *bytes_written = offset;
ARM GAS  /tmp/ccy3FgJK.s 			page 29


 1272              		.loc 1 296 7 is_stmt 1 view .LVU369
 1273              		.loc 1 296 22 is_stmt 0 view .LVU370
 1274 0072 2B60     		str	r3, [r5]
 1275 0074 12E0     		b	.L84
 1276              	.LVL132:
 1277              	.L95:
 285:src/falafel/falafel.c ****           status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 1278              		.loc 1 285 9 is_stmt 1 view .LVU371
 285:src/falafel/falafel.c ****           status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 1279              		.loc 1 285 13 is_stmt 0 view .LVU372
 1280 0076 3269     		ldr	r2, [r6, #16]
 1281 0078 A4F10F01 		sub	r1, r4, #15
 1282 007c 07F10F00 		add	r0, r7, #15
 1283 0080 FFF7FEFF 		bl	memcpy_s
 1284              	.LVL133:
 285:src/falafel/falafel.c ****           status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 1285              		.loc 1 285 12 view .LVU373
 1286 0084 0446     		mov	r4, r0
 1287              	.LVL134:
 285:src/falafel/falafel.c ****           status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 1288              		.loc 1 285 12 view .LVU374
 1289 0086 20B9     		cbnz	r0, .L92
 288:src/falafel/falafel.c ****         }
 1290              		.loc 1 288 11 is_stmt 1 view .LVU375
 288:src/falafel/falafel.c ****         }
 1291              		.loc 1 288 27 is_stmt 0 view .LVU376
 1292 0088 B6F80E80 		ldrh	r8, [r6, #14]
 288:src/falafel/falafel.c ****         }
 1293              		.loc 1 288 18 view .LVU377
 1294 008c 08F10F08 		add	r8, r8, #15
 1295              	.LVL135:
 288:src/falafel/falafel.c ****         }
 1296              		.loc 1 288 18 view .LVU378
 1297 0090 E8E7     		b	.L86
 1298              	.LVL136:
 1299              	.L92:
 281:src/falafel/falafel.c **** 
 1300              		.loc 1 281 14 view .LVU379
 1301 0092 4FF00F08 		mov	r8, #15
 286:src/falafel/falafel.c ****         } else {
 1302              		.loc 1 286 18 view .LVU380
 1303 0096 0324     		movs	r4, #3
 1304 0098 E4E7     		b	.L86
 1305              	.LVL137:
 1306              	.L87:
 286:src/falafel/falafel.c ****         } else {
 1307              		.loc 1 286 18 view .LVU381
 1308              	.LBE6:
 258:src/falafel/falafel.c ****   } else {
 1309              		.loc 1 258 12 view .LVU382
 1310 009a 0124     		movs	r4, #1
 1311              	.LVL138:
 1312              	.L84:
 297:src/falafel/falafel.c ****     }
 298:src/falafel/falafel.c ****   }
 299:src/falafel/falafel.c **** 
 300:src/falafel/falafel.c ****   return status;
ARM GAS  /tmp/ccy3FgJK.s 			page 30


 1313              		.loc 1 300 3 is_stmt 1 view .LVU383
 301:src/falafel/falafel.c **** }
 1314              		.loc 1 301 1 is_stmt 0 view .LVU384
 1315 009c 2046     		mov	r0, r4
 1316 009e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1317              	.LVL139:
 1318              	.L88:
 258:src/falafel/falafel.c ****   } else {
 1319              		.loc 1 258 12 view .LVU385
 1320 00a2 0124     		movs	r4, #1
 1321 00a4 FAE7     		b	.L84
 1322              		.cfi_endproc
 1323              	.LFE26:
 1325              		.section	.text.packet_deserialize,"ax",%progbits
 1326              		.align	1
 1327              		.global	packet_deserialize
 1328              		.syntax unified
 1329              		.thumb
 1330              		.thumb_func
 1332              	packet_deserialize:
 1333              	.LVL140:
 1334              	.LFB27:
 302:src/falafel/falafel.c **** 
 303:src/falafel/falafel.c **** packet_err_t packet_deserialize(packet_t *packet, const uint8_t *buffer, uint32_t buffer_length) {
 1335              		.loc 1 303 98 is_stmt 1 view -0
 1336              		.cfi_startproc
 1337              		@ args = 0, pretend = 0, frame = 0
 1338              		@ frame_needed = 0, uses_anonymous_args = 0
 1339              		.loc 1 303 98 is_stmt 0 view .LVU387
 1340 0000 70B5     		push	{r4, r5, r6, lr}
 1341              	.LCFI7:
 1342              		.cfi_def_cfa_offset 16
 1343              		.cfi_offset 4, -16
 1344              		.cfi_offset 5, -12
 1345              		.cfi_offset 6, -8
 1346              		.cfi_offset 14, -4
 304:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 1347              		.loc 1 304 3 is_stmt 1 view .LVU388
 1348              	.LVL141:
 305:src/falafel/falafel.c ****   uint32_t offset = 0;
 1349              		.loc 1 305 3 view .LVU389
 306:src/falafel/falafel.c **** 
 307:src/falafel/falafel.c ****   if (!packet || !buffer) {
 1350              		.loc 1 307 3 view .LVU390
 1351              		.loc 1 307 6 is_stmt 0 view .LVU391
 1352 0002 0029     		cmp	r1, #0
 1353 0004 18BF     		it	ne
 1354 0006 0028     		cmpne	r0, #0
 1355 0008 3AD0     		beq	.L100
 1356 000a 1446     		mov	r4, r2
 1357 000c 0546     		mov	r5, r0
 1358 000e 0E46     		mov	r6, r1
 308:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 309:src/falafel/falafel.c ****   } else if (buffer_length < 15) { // Minimum length for fixed fields
 1359              		.loc 1 309 10 is_stmt 1 view .LVU392
 1360              		.loc 1 309 13 is_stmt 0 view .LVU393
 1361 0010 0E2A     		cmp	r2, #14
ARM GAS  /tmp/ccy3FgJK.s 			page 31


 1362 0012 01D8     		bhi	.L106
 310:src/falafel/falafel.c ****     status = PACKET_ERROR_MALFORMED_PACKET;
 1363              		.loc 1 310 12 view .LVU394
 1364 0014 0624     		movs	r4, #6
 1365 0016 34E0     		b	.L97
 1366              	.L106:
 311:src/falafel/falafel.c ****   } else {
 312:src/falafel/falafel.c ****     packet->standard_version = buffer[offset++];
 1367              		.loc 1 312 5 is_stmt 1 view .LVU395
 1368              	.LVL142:
 1369              		.loc 1 312 38 is_stmt 0 view .LVU396
 1370 0018 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 1371              		.loc 1 312 30 view .LVU397
 1372 001a 0370     		strb	r3, [r0]
 313:src/falafel/falafel.c ****     packet->type = buffer[offset++];
 1373              		.loc 1 313 5 is_stmt 1 view .LVU398
 1374              	.LVL143:
 1375              		.loc 1 313 26 is_stmt 0 view .LVU399
 1376 001c 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 1377              		.loc 1 313 18 view .LVU400
 1378 001e 4370     		strb	r3, [r0, #1]
 314:src/falafel/falafel.c ****     packet->data_flag = buffer[offset++];
 1379              		.loc 1 314 5 is_stmt 1 view .LVU401
 1380              	.LVL144:
 1381              		.loc 1 314 31 is_stmt 0 view .LVU402
 1382 0020 8B78     		ldrb	r3, [r1, #2]	@ zero_extendqisi2
 1383              		.loc 1 314 23 view .LVU403
 1384 0022 8370     		strb	r3, [r0, #2]
 315:src/falafel/falafel.c **** 
 316:src/falafel/falafel.c ****     // Deserialize 4-byte id
 317:src/falafel/falafel.c ****     uint8_array_to_uint32(&buffer[offset], &packet->id);
 1385              		.loc 1 317 5 is_stmt 1 view .LVU404
 1386 0024 011D     		adds	r1, r0, #4
 1387              	.LVL145:
 1388              		.loc 1 317 5 is_stmt 0 view .LVU405
 1389 0026 F01C     		adds	r0, r6, #3
 1390              	.LVL146:
 1391              		.loc 1 317 5 view .LVU406
 1392 0028 FFF7FEFF 		bl	uint8_array_to_uint32
 1393              	.LVL147:
 318:src/falafel/falafel.c ****     offset += 4;
 1394              		.loc 1 318 5 is_stmt 1 view .LVU407
 319:src/falafel/falafel.c **** 
 320:src/falafel/falafel.c ****     // Deserialize 4-byte transmit_time
 321:src/falafel/falafel.c ****     uint8_array_to_uint32(&buffer[offset], &packet->transmit_time);
 1395              		.loc 1 321 5 view .LVU408
 1396 002c 05F10801 		add	r1, r5, #8
 1397 0030 F01D     		adds	r0, r6, #7
 1398 0032 FFF7FEFF 		bl	uint8_array_to_uint32
 1399              	.LVL148:
 322:src/falafel/falafel.c ****     offset += 4;
 1400              		.loc 1 322 5 view .LVU409
 323:src/falafel/falafel.c **** 
 324:src/falafel/falafel.c ****     // Deserialize 1-byte service
 325:src/falafel/falafel.c ****     packet->service = buffer[offset++];
 1401              		.loc 1 325 5 view .LVU410
 1402              		.loc 1 325 29 is_stmt 0 view .LVU411
ARM GAS  /tmp/ccy3FgJK.s 			page 32


 1403 0036 F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
 1404              		.loc 1 325 21 view .LVU412
 1405 0038 2B73     		strb	r3, [r5, #12]
 326:src/falafel/falafel.c ****     // Deserialize 1-byte subservice
 327:src/falafel/falafel.c ****     packet->subservice = buffer[offset++];
 1406              		.loc 1 327 5 is_stmt 1 view .LVU413
 1407              	.LVL149:
 1408              		.loc 1 327 32 is_stmt 0 view .LVU414
 1409 003a 337B     		ldrb	r3, [r6, #12]	@ zero_extendqisi2
 1410              		.loc 1 327 24 view .LVU415
 1411 003c 6B73     		strb	r3, [r5, #13]
 328:src/falafel/falafel.c **** 
 329:src/falafel/falafel.c ****     // Deserialize 2-byte data_length
 330:src/falafel/falafel.c ****     uint8_array_to_uint16(&buffer[offset], &packet->data_length);
 1412              		.loc 1 330 5 is_stmt 1 view .LVU416
 1413 003e 05F10E01 		add	r1, r5, #14
 1414 0042 06F10D00 		add	r0, r6, #13
 1415 0046 FFF7FEFF 		bl	uint8_array_to_uint16
 1416              	.LVL150:
 331:src/falafel/falafel.c ****     offset += 2;
 1417              		.loc 1 331 5 view .LVU417
 332:src/falafel/falafel.c **** 
 333:src/falafel/falafel.c ****     // Check if buffer has enough data for the packet data and CRC16
 334:src/falafel/falafel.c ****     if (buffer_length < offset + packet->data_length + 2) {
 1418              		.loc 1 334 5 view .LVU418
 1419              		.loc 1 334 40 is_stmt 0 view .LVU419
 1420 004a EB89     		ldrh	r3, [r5, #14]
 1421              		.loc 1 334 54 view .LVU420
 1422 004c 03F11102 		add	r2, r3, #17
 1423              		.loc 1 334 8 view .LVU421
 1424 0050 A242     		cmp	r2, r4
 1425 0052 18D8     		bhi	.L102
 335:src/falafel/falafel.c ****       status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 336:src/falafel/falafel.c ****     } else {
 337:src/falafel/falafel.c ****       // Deserialize variable-size data safely using memcpy_s
 338:src/falafel/falafel.c ****       if (packet->data_length > 0) {
 1426              		.loc 1 338 7 is_stmt 1 view .LVU422
 1427              		.loc 1 338 10 is_stmt 0 view .LVU423
 1428 0054 3BB9     		cbnz	r3, .L107
 331:src/falafel/falafel.c **** 
 1429              		.loc 1 331 12 view .LVU424
 1430 0056 0F20     		movs	r0, #15
 304:src/falafel/falafel.c ****   uint32_t offset = 0;
 1431              		.loc 1 304 16 view .LVU425
 1432 0058 0024     		movs	r4, #0
 1433              	.LVL151:
 1434              	.L98:
 339:src/falafel/falafel.c ****         if (memcpy_s(packet->data, PACKET_MAX_DATA_LENGTH, &buffer[offset], packet->data_length) !=
 340:src/falafel/falafel.c ****           status = PACKET_ERROR_NOT_ENOUGH_MEMORY;
 341:src/falafel/falafel.c ****         }
 342:src/falafel/falafel.c ****         offset += packet->data_length;
 343:src/falafel/falafel.c ****       }
 344:src/falafel/falafel.c **** 
 345:src/falafel/falafel.c ****       // Deserialize 2-byte CRC16
 346:src/falafel/falafel.c ****       uint8_array_to_uint16(&buffer[offset], &packet->crc16);
 1435              		.loc 1 346 7 is_stmt 1 view .LVU426
 1436 005a 05F11401 		add	r1, r5, #20
ARM GAS  /tmp/ccy3FgJK.s 			page 33


 1437 005e 3044     		add	r0, r0, r6
 1438 0060 FFF7FEFF 		bl	uint8_array_to_uint16
 1439              	.LVL152:
 347:src/falafel/falafel.c ****       offset += 2;
 1440              		.loc 1 347 7 view .LVU427
 1441              		.loc 1 347 7 is_stmt 0 view .LVU428
 1442 0064 0DE0     		b	.L97
 1443              	.LVL153:
 1444              	.L107:
 339:src/falafel/falafel.c ****         if (memcpy_s(packet->data, PACKET_MAX_DATA_LENGTH, &buffer[offset], packet->data_length) !=
 1445              		.loc 1 339 9 is_stmt 1 view .LVU429
 339:src/falafel/falafel.c ****         if (memcpy_s(packet->data, PACKET_MAX_DATA_LENGTH, &buffer[offset], packet->data_length) !=
 1446              		.loc 1 339 13 is_stmt 0 view .LVU430
 1447 0066 06F10F02 		add	r2, r6, #15
 1448 006a 4FF6FF71 		movw	r1, #65535
 1449 006e 2869     		ldr	r0, [r5, #16]
 1450 0070 FFF7FEFF 		bl	memcpy_s
 1451              	.LVL154:
 339:src/falafel/falafel.c ****         if (memcpy_s(packet->data, PACKET_MAX_DATA_LENGTH, &buffer[offset], packet->data_length) !=
 1452              		.loc 1 339 12 view .LVU431
 1453 0074 0446     		mov	r4, r0
 1454              	.LVL155:
 339:src/falafel/falafel.c ****         if (memcpy_s(packet->data, PACKET_MAX_DATA_LENGTH, &buffer[offset], packet->data_length) !=
 1455              		.loc 1 339 12 view .LVU432
 1456 0076 00B1     		cbz	r0, .L99
 340:src/falafel/falafel.c ****         }
 1457              		.loc 1 340 18 view .LVU433
 1458 0078 0324     		movs	r4, #3
 1459              	.L99:
 1460              	.LVL156:
 342:src/falafel/falafel.c ****       }
 1461              		.loc 1 342 9 is_stmt 1 view .LVU434
 342:src/falafel/falafel.c ****       }
 1462              		.loc 1 342 25 is_stmt 0 view .LVU435
 1463 007a E889     		ldrh	r0, [r5, #14]
 342:src/falafel/falafel.c ****       }
 1464              		.loc 1 342 16 view .LVU436
 1465 007c 0F30     		adds	r0, r0, #15
 1466              	.LVL157:
 342:src/falafel/falafel.c ****       }
 1467              		.loc 1 342 16 view .LVU437
 1468 007e ECE7     		b	.L98
 1469              	.LVL158:
 1470              	.L100:
 308:src/falafel/falafel.c ****   } else if (buffer_length < 15) { // Minimum length for fixed fields
 1471              		.loc 1 308 12 view .LVU438
 1472 0080 0124     		movs	r4, #1
 1473              	.LVL159:
 1474              	.L97:
 348:src/falafel/falafel.c ****     }
 349:src/falafel/falafel.c ****   }
 350:src/falafel/falafel.c **** 
 351:src/falafel/falafel.c ****   return status;
 1475              		.loc 1 351 3 is_stmt 1 view .LVU439
 352:src/falafel/falafel.c **** }
 1476              		.loc 1 352 1 is_stmt 0 view .LVU440
 1477 0082 2046     		mov	r0, r4
ARM GAS  /tmp/ccy3FgJK.s 			page 34


 1478 0084 70BD     		pop	{r4, r5, r6, pc}
 1479              	.LVL160:
 1480              	.L102:
 335:src/falafel/falafel.c ****     } else {
 1481              		.loc 1 335 14 view .LVU441
 1482 0086 0324     		movs	r4, #3
 1483              	.LVL161:
 335:src/falafel/falafel.c ****     } else {
 1484              		.loc 1 335 14 view .LVU442
 1485 0088 FBE7     		b	.L97
 1486              		.cfi_endproc
 1487              	.LFE27:
 1489              		.section	.text.crc16,"ax",%progbits
 1490              		.align	1
 1491              		.global	crc16
 1492              		.syntax unified
 1493              		.thumb
 1494              		.thumb_func
 1496              	crc16:
 1497              	.LVL162:
 1498              	.LFB28:
 353:src/falafel/falafel.c **** 
 354:src/falafel/falafel.c **** uint16_t crc16(const uint8_t *data, size_t length) {
 1499              		.loc 1 354 52 is_stmt 1 view -0
 1500              		.cfi_startproc
 1501              		@ args = 0, pretend = 0, frame = 0
 1502              		@ frame_needed = 0, uses_anonymous_args = 0
 1503              		.loc 1 354 52 is_stmt 0 view .LVU444
 1504 0000 00B5     		push	{lr}
 1505              	.LCFI8:
 1506              		.cfi_def_cfa_offset 4
 1507              		.cfi_offset 14, -4
 1508 0002 8646     		mov	lr, r0
 355:src/falafel/falafel.c ****   const uint16_t generator = 0xA001;
 1509              		.loc 1 355 3 is_stmt 1 view .LVU445
 1510              	.LVL163:
 356:src/falafel/falafel.c ****   uint16_t crc = 0x0;
 1511              		.loc 1 356 3 view .LVU446
 357:src/falafel/falafel.c ****   for (size_t i = 0; i < length; i++) {
 1512              		.loc 1 357 3 view .LVU447
 1513              	.LBB7:
 1514              		.loc 1 357 8 view .LVU448
 1515              		.loc 1 357 15 is_stmt 0 view .LVU449
 1516 0004 4FF0000C 		mov	ip, #0
 1517              	.LBE7:
 356:src/falafel/falafel.c ****   uint16_t crc = 0x0;
 1518              		.loc 1 356 12 view .LVU450
 1519 0008 6046     		mov	r0, ip
 1520              	.LVL164:
 1521              	.LBB10:
 1522              		.loc 1 357 3 view .LVU451
 1523 000a 0EE0     		b	.L109
 1524              	.LVL165:
 1525              	.L111:
 1526              	.LBB8:
 358:src/falafel/falafel.c ****     crc ^= data[i];
 359:src/falafel/falafel.c ****     for (uint8_t j = 0; j < 8; j++) {
ARM GAS  /tmp/ccy3FgJK.s 			page 35


 360:src/falafel/falafel.c ****       if (crc & 1) {
 361:src/falafel/falafel.c ****         crc = (crc >> 1) ^ generator;
 362:src/falafel/falafel.c ****       } else {
 363:src/falafel/falafel.c ****         crc >>= 1;
 1527              		.loc 1 363 9 is_stmt 1 view .LVU452
 1528              		.loc 1 363 13 is_stmt 0 view .LVU453
 1529 000c 4008     		lsrs	r0, r0, #1
 1530              	.LVL166:
 1531              	.L112:
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1532              		.loc 1 359 33 is_stmt 1 discriminator 2 view .LVU454
 1533 000e 0133     		adds	r3, r3, #1
 1534              	.LVL167:
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1535              		.loc 1 359 33 is_stmt 0 discriminator 2 view .LVU455
 1536 0010 DBB2     		uxtb	r3, r3
 1537              	.LVL168:
 1538              	.L110:
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1539              		.loc 1 359 27 is_stmt 1 discriminator 1 view .LVU456
 1540 0012 072B     		cmp	r3, #7
 1541 0014 07D8     		bhi	.L116
 360:src/falafel/falafel.c ****         crc = (crc >> 1) ^ generator;
 1542              		.loc 1 360 7 view .LVU457
 360:src/falafel/falafel.c ****         crc = (crc >> 1) ^ generator;
 1543              		.loc 1 360 10 is_stmt 0 view .LVU458
 1544 0016 10F0010F 		tst	r0, #1
 1545 001a F7D0     		beq	.L111
 361:src/falafel/falafel.c ****       } else {
 1546              		.loc 1 361 9 is_stmt 1 view .LVU459
 361:src/falafel/falafel.c ****       } else {
 1547              		.loc 1 361 13 is_stmt 0 view .LVU460
 1548 001c 4AF20102 		movw	r2, #40961
 1549 0020 82EA5000 		eor	r0, r2, r0, lsr #1
 1550              	.LVL169:
 361:src/falafel/falafel.c ****       } else {
 1551              		.loc 1 361 13 view .LVU461
 1552 0024 F3E7     		b	.L112
 1553              	.L116:
 361:src/falafel/falafel.c ****       } else {
 1554              		.loc 1 361 13 view .LVU462
 1555              	.LBE8:
 357:src/falafel/falafel.c ****     crc ^= data[i];
 1556              		.loc 1 357 35 is_stmt 1 discriminator 2 view .LVU463
 1557 0026 0CF1010C 		add	ip, ip, #1
 1558              	.LVL170:
 1559              	.L109:
 357:src/falafel/falafel.c ****     crc ^= data[i];
 1560              		.loc 1 357 24 discriminator 1 view .LVU464
 1561 002a 8C45     		cmp	ip, r1
 1562 002c 04D2     		bcs	.L117
 358:src/falafel/falafel.c ****     for (uint8_t j = 0; j < 8; j++) {
 1563              		.loc 1 358 5 view .LVU465
 358:src/falafel/falafel.c ****     for (uint8_t j = 0; j < 8; j++) {
 1564              		.loc 1 358 16 is_stmt 0 view .LVU466
 1565 002e 1EF80C30 		ldrb	r3, [lr, ip]	@ zero_extendqisi2
 358:src/falafel/falafel.c ****     for (uint8_t j = 0; j < 8; j++) {
ARM GAS  /tmp/ccy3FgJK.s 			page 36


 1566              		.loc 1 358 9 view .LVU467
 1567 0032 5840     		eors	r0, r0, r3
 1568              	.LVL171:
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1569              		.loc 1 359 5 is_stmt 1 view .LVU468
 1570              	.LBB9:
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1571              		.loc 1 359 10 view .LVU469
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1572              		.loc 1 359 18 is_stmt 0 view .LVU470
 1573 0034 0023     		movs	r3, #0
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1574              		.loc 1 359 5 view .LVU471
 1575 0036 ECE7     		b	.L110
 1576              	.LVL172:
 1577              	.L117:
 359:src/falafel/falafel.c ****       if (crc & 1) {
 1578              		.loc 1 359 5 view .LVU472
 1579              	.LBE9:
 1580              	.LBE10:
 364:src/falafel/falafel.c ****       }
 365:src/falafel/falafel.c ****     }
 366:src/falafel/falafel.c ****   }
 367:src/falafel/falafel.c ****   return crc;
 1581              		.loc 1 367 3 is_stmt 1 view .LVU473
 368:src/falafel/falafel.c **** }
 1582              		.loc 1 368 1 is_stmt 0 view .LVU474
 1583 0038 5DF804FB 		ldr	pc, [sp], #4
 1584              		.cfi_endproc
 1585              	.LFE28:
 1587              		.section	.text.packet_compute_crc16,"ax",%progbits
 1588              		.align	1
 1589              		.global	packet_compute_crc16
 1590              		.syntax unified
 1591              		.thumb
 1592              		.thumb_func
 1594              	packet_compute_crc16:
 1595              	.LVL173:
 1596              	.LFB29:
 369:src/falafel/falafel.c **** 
 370:src/falafel/falafel.c **** packet_err_t packet_compute_crc16(packet_t *packet) {
 1597              		.loc 1 370 53 is_stmt 1 view -0
 1598              		.cfi_startproc
 1599              		@ args = 0, pretend = 0, frame = 8
 1600              		@ frame_needed = 1, uses_anonymous_args = 0
 1601              		.loc 1 370 53 is_stmt 0 view .LVU476
 1602 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1603              	.LCFI9:
 1604              		.cfi_def_cfa_offset 24
 1605              		.cfi_offset 4, -24
 1606              		.cfi_offset 5, -20
 1607              		.cfi_offset 6, -16
 1608              		.cfi_offset 7, -12
 1609              		.cfi_offset 8, -8
 1610              		.cfi_offset 14, -4
 1611 0004 82B0     		sub	sp, sp, #8
 1612              	.LCFI10:
ARM GAS  /tmp/ccy3FgJK.s 			page 37


 1613              		.cfi_def_cfa_offset 32
 1614 0006 00AF     		add	r7, sp, #0
 1615              	.LCFI11:
 1616              		.cfi_def_cfa_register 7
 371:src/falafel/falafel.c ****   packet_err_t status = PACKET_OK;
 1617              		.loc 1 371 3 is_stmt 1 view .LVU477
 1618              	.LVL174:
 372:src/falafel/falafel.c ****   if (!packet) {
 1619              		.loc 1 372 3 view .LVU478
 1620              		.loc 1 372 6 is_stmt 0 view .LVU479
 1621 0008 D0B1     		cbz	r0, .L121
 1622 000a 0446     		mov	r4, r0
 1623              	.LBB11:
 373:src/falafel/falafel.c ****     status = PACKET_ERROR_NULL_POINTER;
 374:src/falafel/falafel.c ****   } else {
 1624              		.loc 1 374 10 view .LVU480
 1625 000c 6E46     		mov	r6, sp
 375:src/falafel/falafel.c ****     uint8_t buffer[13 + PACKET_MAX_DATA_LENGTH + 2]; // Fixed fields + data + CRC16
 1626              		.loc 1 375 5 is_stmt 1 view .LVU481
 1627              	.LVL175:
 1628              		.loc 1 375 13 is_stmt 0 view .LVU482
 1629 000e ADF5803D 		sub	sp, sp, #65536
 1630 0012 84B0     		sub	sp, sp, #16
 1631 0014 E846     		mov	r8, sp
 1632              	.LVL176:
 376:src/falafel/falafel.c ****     uint32_t bytes_written = 0;
 1633              		.loc 1 376 5 is_stmt 1 view .LVU483
 1634              		.loc 1 376 14 is_stmt 0 view .LVU484
 1635 0016 0023     		movs	r3, #0
 1636 0018 7B60     		str	r3, [r7, #4]
 377:src/falafel/falafel.c **** 
 378:src/falafel/falafel.c ****     // Set  CRC16 to 0 for calculation
 379:src/falafel/falafel.c ****     packet->crc16 = 0;
 1637              		.loc 1 379 5 is_stmt 1 view .LVU485
 1638              		.loc 1 379 19 is_stmt 0 view .LVU486
 1639 001a 8382     		strh	r3, [r0, #20]	@ movhi
 380:src/falafel/falafel.c **** 
 381:src/falafel/falafel.c ****     status = packet_serialize(packet, buffer, sizeof(buffer), &bytes_written);
 1640              		.loc 1 381 5 is_stmt 1 view .LVU487
 1641              		.loc 1 381 14 is_stmt 0 view .LVU488
 1642 001c 3B1D     		adds	r3, r7, #4
 1643 001e 094A     		ldr	r2, .L123
 1644 0020 6946     		mov	r1, sp
 1645 0022 FFF7FEFF 		bl	packet_serialize
 1646              	.LVL177:
 382:src/falafel/falafel.c ****     if (status == PACKET_OK) {
 1647              		.loc 1 382 5 is_stmt 1 view .LVU489
 1648              		.loc 1 382 8 is_stmt 0 view .LVU490
 1649 0026 0546     		mov	r5, r0
 1650 0028 20B9     		cbnz	r0, .L120
 383:src/falafel/falafel.c ****       packet->crc16 = crc16(buffer, bytes_written);
 1651              		.loc 1 383 7 is_stmt 1 view .LVU491
 1652              		.loc 1 383 23 is_stmt 0 view .LVU492
 1653 002a 7968     		ldr	r1, [r7, #4]
 1654 002c 4046     		mov	r0, r8
 1655              	.LVL178:
 1656              		.loc 1 383 23 view .LVU493
ARM GAS  /tmp/ccy3FgJK.s 			page 38


 1657 002e FFF7FEFF 		bl	crc16
 1658              	.LVL179:
 1659              		.loc 1 383 21 view .LVU494
 1660 0032 A082     		strh	r0, [r4, #20]	@ movhi
 1661              	.L120:
 1662 0034 B546     		mov	sp, r6
 1663              	.LVL180:
 1664              	.L119:
 1665              		.loc 1 383 21 view .LVU495
 1666              	.LBE11:
 384:src/falafel/falafel.c ****     }
 385:src/falafel/falafel.c ****   }
 386:src/falafel/falafel.c ****   return status;
 1667              		.loc 1 386 3 is_stmt 1 view .LVU496
 387:src/falafel/falafel.c **** }
 1668              		.loc 1 387 1 is_stmt 0 view .LVU497
 1669 0036 2846     		mov	r0, r5
 1670 0038 0837     		adds	r7, r7, #8
 1671              	.LCFI12:
 1672              		.cfi_remember_state
 1673              		.cfi_def_cfa_offset 24
 1674 003a BD46     		mov	sp, r7
 1675              	.LCFI13:
 1676              		.cfi_def_cfa_register 13
 1677              		@ sp needed
 1678 003c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1679              	.LVL181:
 1680              	.L121:
 1681              	.LCFI14:
 1682              		.cfi_restore_state
 373:src/falafel/falafel.c ****   } else {
 1683              		.loc 1 373 12 view .LVU498
 1684 0040 0125     		movs	r5, #1
 1685 0042 F8E7     		b	.L119
 1686              	.L124:
 1687              		.align	2
 1688              	.L123:
 1689 0044 0E000100 		.word	65550
 1690              		.cfi_endproc
 1691              	.LFE29:
 1693              		.text
 1694              	.Letext0:
 1695              		.file 2 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 1696              		.file 3 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stddef.h"
 1697              		.file 4 "src/low_level/memcpy_s.h"
 1698              		.file 5 "src/falafel/falafel.h"
ARM GAS  /tmp/ccy3FgJK.s 			page 39


DEFINED SYMBOLS
                            *ABS*:00000000 falafel.c
     /tmp/ccy3FgJK.s:20     .text.packet_get_standard_version:00000000 $t
     /tmp/ccy3FgJK.s:26     .text.packet_get_standard_version:00000000 packet_get_standard_version
     /tmp/ccy3FgJK.s:63     .text.packet_set_standard_version:00000000 $t
     /tmp/ccy3FgJK.s:69     .text.packet_set_standard_version:00000000 packet_set_standard_version
     /tmp/ccy3FgJK.s:101    .text.packet_get_type:00000000 $t
     /tmp/ccy3FgJK.s:107    .text.packet_get_type:00000000 packet_get_type
     /tmp/ccy3FgJK.s:144    .text.packet_set_type:00000000 $t
     /tmp/ccy3FgJK.s:150    .text.packet_set_type:00000000 packet_set_type
     /tmp/ccy3FgJK.s:182    .text.packet_get_data_flag:00000000 $t
     /tmp/ccy3FgJK.s:188    .text.packet_get_data_flag:00000000 packet_get_data_flag
     /tmp/ccy3FgJK.s:225    .text.packet_set_data_flag:00000000 $t
     /tmp/ccy3FgJK.s:231    .text.packet_set_data_flag:00000000 packet_set_data_flag
     /tmp/ccy3FgJK.s:263    .text.packet_get_id:00000000 $t
     /tmp/ccy3FgJK.s:269    .text.packet_get_id:00000000 packet_get_id
     /tmp/ccy3FgJK.s:306    .text.packet_set_id:00000000 $t
     /tmp/ccy3FgJK.s:312    .text.packet_set_id:00000000 packet_set_id
     /tmp/ccy3FgJK.s:344    .text.packet_get_transmit_time:00000000 $t
     /tmp/ccy3FgJK.s:350    .text.packet_get_transmit_time:00000000 packet_get_transmit_time
     /tmp/ccy3FgJK.s:387    .text.packet_set_transmit_time:00000000 $t
     /tmp/ccy3FgJK.s:393    .text.packet_set_transmit_time:00000000 packet_set_transmit_time
     /tmp/ccy3FgJK.s:425    .text.packet_get_data_length:00000000 $t
     /tmp/ccy3FgJK.s:431    .text.packet_get_data_length:00000000 packet_get_data_length
     /tmp/ccy3FgJK.s:468    .text.packet_set_data_length:00000000 $t
     /tmp/ccy3FgJK.s:474    .text.packet_set_data_length:00000000 packet_set_data_length
     /tmp/ccy3FgJK.s:506    .text.packet_get_data:00000000 $t
     /tmp/ccy3FgJK.s:512    .text.packet_get_data:00000000 packet_get_data
     /tmp/ccy3FgJK.s:623    .text.packet_set_data:00000000 $t
     /tmp/ccy3FgJK.s:629    .text.packet_set_data:00000000 packet_set_data
     /tmp/ccy3FgJK.s:722    .text.packet_get_crc16:00000000 $t
     /tmp/ccy3FgJK.s:728    .text.packet_get_crc16:00000000 packet_get_crc16
     /tmp/ccy3FgJK.s:765    .text.packet_get_service:00000000 $t
     /tmp/ccy3FgJK.s:771    .text.packet_get_service:00000000 packet_get_service
     /tmp/ccy3FgJK.s:808    .text.packet_set_service:00000000 $t
     /tmp/ccy3FgJK.s:814    .text.packet_set_service:00000000 packet_set_service
     /tmp/ccy3FgJK.s:846    .text.packet_get_subservice:00000000 $t
     /tmp/ccy3FgJK.s:852    .text.packet_get_subservice:00000000 packet_get_subservice
     /tmp/ccy3FgJK.s:889    .text.packet_set_subservice:00000000 $t
     /tmp/ccy3FgJK.s:895    .text.packet_set_subservice:00000000 packet_set_subservice
     /tmp/ccy3FgJK.s:927    .text.uint32_to_uint8_array:00000000 $t
     /tmp/ccy3FgJK.s:933    .text.uint32_to_uint8_array:00000000 uint32_to_uint8_array
     /tmp/ccy3FgJK.s:980    .text.uint8_array_to_uint32:00000000 $t
     /tmp/ccy3FgJK.s:986    .text.uint8_array_to_uint32:00000000 uint8_array_to_uint32
     /tmp/ccy3FgJK.s:1040   .text.uint16_to_uint8_array:00000000 $t
     /tmp/ccy3FgJK.s:1046   .text.uint16_to_uint8_array:00000000 uint16_to_uint8_array
     /tmp/ccy3FgJK.s:1082   .text.uint8_array_to_uint16:00000000 $t
     /tmp/ccy3FgJK.s:1088   .text.uint8_array_to_uint16:00000000 uint8_array_to_uint16
     /tmp/ccy3FgJK.s:1132   .text.packet_serialize:00000000 $t
     /tmp/ccy3FgJK.s:1138   .text.packet_serialize:00000000 packet_serialize
     /tmp/ccy3FgJK.s:1326   .text.packet_deserialize:00000000 $t
     /tmp/ccy3FgJK.s:1332   .text.packet_deserialize:00000000 packet_deserialize
     /tmp/ccy3FgJK.s:1490   .text.crc16:00000000 $t
     /tmp/ccy3FgJK.s:1496   .text.crc16:00000000 crc16
     /tmp/ccy3FgJK.s:1588   .text.packet_compute_crc16:00000000 $t
     /tmp/ccy3FgJK.s:1594   .text.packet_compute_crc16:00000000 packet_compute_crc16
     /tmp/ccy3FgJK.s:1689   .text.packet_compute_crc16:00000044 $d
ARM GAS  /tmp/ccy3FgJK.s 			page 40



UNDEFINED SYMBOLS
memcpy_s
