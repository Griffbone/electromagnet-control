ARM GAS  /tmp/cc4mZEMS.s 			page 1


   1              		.cpu cortex-m0plus
   2              		.arch armv6s-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 0
  12              		.eabi_attribute 18, 4
  13              		.file	"bbpwm.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "src/drivers/bbpwm/bbpwm.c"
  18              		.section	.text.bbpwm_init,"ax",%progbits
  19              		.align	1
  20              		.p2align 2,,3
  21              		.global	bbpwm_init
  22              		.syntax unified
  23              		.code	16
  24              		.thumb_func
  26              	bbpwm_init:
  27              	.LVL0:
  28              	.LFB217:
   1:src/drivers/bbpwm/bbpwm.c **** #include "bbpwm.h"
   2:src/drivers/bbpwm/bbpwm.c **** 
   3:src/drivers/bbpwm/bbpwm.c **** bbpwm_err_t bbpwm_init(bbpwm_device_t *device) {
  29              		.loc 1 3 48 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
   4:src/drivers/bbpwm/bbpwm.c **** 	device->last_update = device->htim->Instance->CNT;
  34              		.loc 1 4 2 view .LVU1
  35              		.loc 1 4 36 is_stmt 0 view .LVU2
  36 0000 0369     		ldr	r3, [r0, #16]
   5:src/drivers/bbpwm/bbpwm.c **** 	device->state = false;
   6:src/drivers/bbpwm/bbpwm.c **** 
   7:src/drivers/bbpwm/bbpwm.c **** 	return BBPWM_ERR_OK;
   8:src/drivers/bbpwm/bbpwm.c **** }
  37              		.loc 1 8 1 view .LVU3
  38              		@ sp needed
   4:src/drivers/bbpwm/bbpwm.c **** 	device->last_update = device->htim->Instance->CNT;
  39              		.loc 1 4 36 view .LVU4
  40 0002 1B68     		ldr	r3, [r3]
   4:src/drivers/bbpwm/bbpwm.c **** 	device->last_update = device->htim->Instance->CNT;
  41              		.loc 1 4 46 view .LVU5
  42 0004 5B6A     		ldr	r3, [r3, #36]
   4:src/drivers/bbpwm/bbpwm.c **** 	device->last_update = device->htim->Instance->CNT;
  43              		.loc 1 4 22 view .LVU6
  44 0006 C380     		strh	r3, [r0, #6]
   5:src/drivers/bbpwm/bbpwm.c **** 	device->state = false;
  45              		.loc 1 5 2 is_stmt 1 view .LVU7
   5:src/drivers/bbpwm/bbpwm.c **** 	device->state = false;
ARM GAS  /tmp/cc4mZEMS.s 			page 2


  46              		.loc 1 5 16 is_stmt 0 view .LVU8
  47 0008 0023     		movs	r3, #0
  48 000a 0370     		strb	r3, [r0]
   7:src/drivers/bbpwm/bbpwm.c **** }
  49              		.loc 1 7 2 is_stmt 1 view .LVU9
  50              		.loc 1 8 1 is_stmt 0 view .LVU10
  51 000c 0020     		movs	r0, #0
  52              	.LVL1:
  53              		.loc 1 8 1 view .LVU11
  54 000e 7047     		bx	lr
  55              		.cfi_endproc
  56              	.LFE217:
  58              		.section	.text.bbpwm_update,"ax",%progbits
  59              		.align	1
  60              		.p2align 2,,3
  61              		.global	bbpwm_update
  62              		.syntax unified
  63              		.code	16
  64              		.thumb_func
  66              	bbpwm_update:
  67              	.LVL2:
  68              	.LFB218:
   9:src/drivers/bbpwm/bbpwm.c **** 
  10:src/drivers/bbpwm/bbpwm.c **** bbpwm_err_t bbpwm_update(bbpwm_device_t *device) {
  69              		.loc 1 10 50 is_stmt 1 view -0
  70              		.cfi_startproc
  71              		@ args = 0, pretend = 0, frame = 0
  72              		@ frame_needed = 0, uses_anonymous_args = 0
  11:src/drivers/bbpwm/bbpwm.c **** 	// Get timer counter
  12:src/drivers/bbpwm/bbpwm.c **** 	uint16_t count = device->htim->Instance->CNT;
  73              		.loc 1 12 2 view .LVU13
  10:src/drivers/bbpwm/bbpwm.c **** 	// Get timer counter
  74              		.loc 1 10 50 is_stmt 0 view .LVU14
  75 0000 10B5     		push	{r4, lr}
  76              	.LCFI0:
  77              		.cfi_def_cfa_offset 8
  78              		.cfi_offset 4, -8
  79              		.cfi_offset 14, -4
  80              		.loc 1 12 31 view .LVU15
  81 0002 0369     		ldr	r3, [r0, #16]
  13:src/drivers/bbpwm/bbpwm.c **** 	
  14:src/drivers/bbpwm/bbpwm.c **** 	// If we are at 100% or 0% duty cycle, don't do anything unless the current state is wrong
  15:src/drivers/bbpwm/bbpwm.c **** 	if (device->toff == 0 || device->ton == 0) {
  82              		.loc 1 15 12 view .LVU16
  83 0004 8288     		ldrh	r2, [r0, #4]
  12:src/drivers/bbpwm/bbpwm.c **** 	
  84              		.loc 1 12 31 view .LVU17
  85 0006 1B68     		ldr	r3, [r3]
  12:src/drivers/bbpwm/bbpwm.c **** 	
  86              		.loc 1 12 41 view .LVU18
  87 0008 5B6A     		ldr	r3, [r3, #36]
  12:src/drivers/bbpwm/bbpwm.c **** 	
  88              		.loc 1 12 11 view .LVU19
  89 000a 9BB2     		uxth	r3, r3
  90              	.LVL3:
  91              		.loc 1 15 2 is_stmt 1 view .LVU20
  92              		.loc 1 15 5 is_stmt 0 view .LVU21
ARM GAS  /tmp/cc4mZEMS.s 			page 3


  93 000c 002A     		cmp	r2, #0
  94 000e 0FD1     		bne	.L4
  16:src/drivers/bbpwm/bbpwm.c **** 		// If we are off and should be on, turn on
  17:src/drivers/bbpwm/bbpwm.c **** 		if (!device->state && device->toff == 0) {
  95              		.loc 1 17 3 is_stmt 1 view .LVU22
  96              		.loc 1 17 6 is_stmt 0 view .LVU23
  97 0010 0278     		ldrb	r2, [r0]
  98 0012 002A     		cmp	r2, #0
  99 0014 2AD1     		bne	.L5
  18:src/drivers/bbpwm/bbpwm.c **** 			bbpwm_set_high(device);
 100              		.loc 1 18 4 is_stmt 1 view .LVU24
 101              	.LVL4:
 102              	.LBB10:
 103              	.LBI10:
  19:src/drivers/bbpwm/bbpwm.c **** 			device->state = false;
  20:src/drivers/bbpwm/bbpwm.c **** 		}
  21:src/drivers/bbpwm/bbpwm.c **** 		// If we are on and should be off, turn off
  22:src/drivers/bbpwm/bbpwm.c **** 		else if (device->state && device->ton == 0) {
  23:src/drivers/bbpwm/bbpwm.c **** 			bbpwm_set_high(device);
  24:src/drivers/bbpwm/bbpwm.c **** 			device->state = true;
  25:src/drivers/bbpwm/bbpwm.c **** 		}
  26:src/drivers/bbpwm/bbpwm.c **** 	}
  27:src/drivers/bbpwm/bbpwm.c **** 	// If we are on and past ton, turn off
  28:src/drivers/bbpwm/bbpwm.c **** 	if (device->state && ((uint16_t)(count - device->last_update) >= device->ton)) {
  29:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_low(device);
  30:src/drivers/bbpwm/bbpwm.c **** 		device->state = !device->state;
  31:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
  32:src/drivers/bbpwm/bbpwm.c **** 	}
  33:src/drivers/bbpwm/bbpwm.c **** 	// If we are off and past toff, turn on
  34:src/drivers/bbpwm/bbpwm.c **** 	else if (!(device->state) && ((uint16_t)(count - device->last_update) >= device->toff)) {
  35:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_high(device);
  36:src/drivers/bbpwm/bbpwm.c **** 		device->state = !device->state;
  37:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
  38:src/drivers/bbpwm/bbpwm.c **** 	}
  39:src/drivers/bbpwm/bbpwm.c **** 
  40:src/drivers/bbpwm/bbpwm.c **** 	return BBPWM_ERR_OK;																				
  41:src/drivers/bbpwm/bbpwm.c **** }
  42:src/drivers/bbpwm/bbpwm.c **** 
  43:src/drivers/bbpwm/bbpwm.c **** bbpwm_err_t bbpwm_set_dc(bbpwm_device_t *device, uint8_t dc) {
  44:src/drivers/bbpwm/bbpwm.c **** 	// Calculate ton and toff
  45:src/drivers/bbpwm/bbpwm.c **** 	uint16_t ton = 0;
  46:src/drivers/bbpwm/bbpwm.c **** 	uint16_t toff = 0;																																											
  47:src/drivers/bbpwm/bbpwm.c **** 
  48:src/drivers/bbpwm/bbpwm.c **** 	ton = ((uint16_t)dc*COUNTS_PER_CYCLE)/255;
  49:src/drivers/bbpwm/bbpwm.c **** 	toff = (uint16_t)(COUNTS_PER_CYCLE - ton);
  50:src/drivers/bbpwm/bbpwm.c **** 	
  51:src/drivers/bbpwm/bbpwm.c **** 	// Set ton and toff into device structure
  52:src/drivers/bbpwm/bbpwm.c **** 	device->ton = ton;
  53:src/drivers/bbpwm/bbpwm.c **** 	device->toff = toff;
  54:src/drivers/bbpwm/bbpwm.c **** 
  55:src/drivers/bbpwm/bbpwm.c **** 	// Return error code
  56:src/drivers/bbpwm/bbpwm.c **** 	return BBPWM_ERR_OK;
  57:src/drivers/bbpwm/bbpwm.c **** }
  58:src/drivers/bbpwm/bbpwm.c **** 
  59:src/drivers/bbpwm/bbpwm.c **** bbpwm_err_t bbpwm_set_low(bbpwm_device_t *device) {
  60:src/drivers/bbpwm/bbpwm.c **** 	device->gpio_port->ODR ^= device->gpio_pin;
  61:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
ARM GAS  /tmp/cc4mZEMS.s 			page 4


  62:src/drivers/bbpwm/bbpwm.c **** 
  63:src/drivers/bbpwm/bbpwm.c **** 	return BBPWM_ERR_OK;
  64:src/drivers/bbpwm/bbpwm.c **** }
  65:src/drivers/bbpwm/bbpwm.c **** 
  66:src/drivers/bbpwm/bbpwm.c **** bbpwm_err_t bbpwm_set_high(bbpwm_device_t *device) {
 104              		.loc 1 66 13 view .LVU25
 105              	.LBB11:
  67:src/drivers/bbpwm/bbpwm.c **** 	device->gpio_port->ODR |= device->gpio_pin;
 106              		.loc 1 67 2 view .LVU26
 107              		.loc 1 67 8 is_stmt 0 view .LVU27
 108 0016 8268     		ldr	r2, [r0, #8]
 109              		.loc 1 67 34 view .LVU28
 110 0018 8489     		ldrh	r4, [r0, #12]
 111              		.loc 1 67 19 view .LVU29
 112 001a 5169     		ldr	r1, [r2, #20]
 113              		.loc 1 67 25 view .LVU30
 114 001c 2143     		orrs	r1, r4
 115 001e 5161     		str	r1, [r2, #20]
  68:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
  69:src/drivers/bbpwm/bbpwm.c **** 	
  70:src/drivers/bbpwm/bbpwm.c **** 	return BBPWM_ERR_OK;
 116              		.loc 1 70 2 is_stmt 1 view .LVU31
 117              	.LVL5:
 118              		.loc 1 70 2 is_stmt 0 view .LVU32
 119              	.LBE11:
 120              	.LBE10:
  19:src/drivers/bbpwm/bbpwm.c **** 		}
 121              		.loc 1 19 4 is_stmt 1 view .LVU33
  28:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_low(device);
 122              		.loc 1 28 2 view .LVU34
  34:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_high(device);
 123              		.loc 1 34 7 view .LVU35
 124              	.L10:
  35:src/drivers/bbpwm/bbpwm.c **** 		device->state = !device->state;
 125              		.loc 1 35 3 view .LVU36
 126              	.LBB13:
 127              	.LBI13:
  66:src/drivers/bbpwm/bbpwm.c **** 	device->gpio_port->ODR |= device->gpio_pin;
 128              		.loc 1 66 13 view .LVU37
 129              	.LBB14:
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 130              		.loc 1 67 2 view .LVU38
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 131              		.loc 1 67 19 is_stmt 0 view .LVU39
 132 0020 5169     		ldr	r1, [r2, #20]
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 133              		.loc 1 67 25 view .LVU40
 134 0022 2143     		orrs	r1, r4
 135 0024 5161     		str	r1, [r2, #20]
 136              		.loc 1 70 2 is_stmt 1 view .LVU41
 137              	.LVL6:
 138              		.loc 1 70 2 is_stmt 0 view .LVU42
 139              	.LBE14:
 140              	.LBE13:
  36:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
 141              		.loc 1 36 3 is_stmt 1 view .LVU43
  36:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
ARM GAS  /tmp/cc4mZEMS.s 			page 5


 142              		.loc 1 36 17 is_stmt 0 view .LVU44
 143 0026 0122     		movs	r2, #1
  37:src/drivers/bbpwm/bbpwm.c **** 	}
 144              		.loc 1 37 23 view .LVU45
 145 0028 C380     		strh	r3, [r0, #6]
  36:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
 146              		.loc 1 36 17 view .LVU46
 147 002a 0270     		strb	r2, [r0]
  37:src/drivers/bbpwm/bbpwm.c **** 	}
 148              		.loc 1 37 3 is_stmt 1 view .LVU47
  40:src/drivers/bbpwm/bbpwm.c **** }
 149              		.loc 1 40 2 view .LVU48
 150              	.L16:
  41:src/drivers/bbpwm/bbpwm.c **** 
 151              		.loc 1 41 1 is_stmt 0 view .LVU49
 152 002c 0020     		movs	r0, #0
 153              	.LVL7:
  41:src/drivers/bbpwm/bbpwm.c **** 
 154              		.loc 1 41 1 view .LVU50
 155              		@ sp needed
 156 002e 10BD     		pop	{r4, pc}
 157              	.LVL8:
 158              	.L4:
  15:src/drivers/bbpwm/bbpwm.c **** 		// If we are off and should be on, turn on
 159              		.loc 1 15 33 discriminator 1 view .LVU51
 160 0030 4188     		ldrh	r1, [r0, #2]
  15:src/drivers/bbpwm/bbpwm.c **** 		// If we are off and should be on, turn on
 161              		.loc 1 15 24 discriminator 1 view .LVU52
 162 0032 0029     		cmp	r1, #0
 163 0034 0AD0     		beq	.L22
  28:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_low(device);
 164              		.loc 1 28 2 is_stmt 1 view .LVU53
  28:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_low(device);
 165              		.loc 1 28 5 is_stmt 0 view .LVU54
 166 0036 0478     		ldrb	r4, [r0]
 167 0038 002C     		cmp	r4, #0
 168 003a 1AD1     		bne	.L13
 169              	.L9:
  34:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_high(device);
 170              		.loc 1 34 7 is_stmt 1 discriminator 1 view .LVU55
  34:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_high(device);
 171              		.loc 1 34 32 is_stmt 0 discriminator 1 view .LVU56
 172 003c C188     		ldrh	r1, [r0, #6]
 173 003e 591A     		subs	r1, r3, r1
  34:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_high(device);
 174              		.loc 1 34 28 discriminator 1 view .LVU57
 175 0040 89B2     		uxth	r1, r1
 176 0042 8A42     		cmp	r2, r1
 177 0044 F2D8     		bhi	.L16
 178              	.LBB16:
 179              	.LBB12:
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 180              		.loc 1 67 8 view .LVU58
 181 0046 8268     		ldr	r2, [r0, #8]
 182              	.LBE12:
 183              	.LBE16:
 184              	.LBB17:
ARM GAS  /tmp/cc4mZEMS.s 			page 6


 185              	.LBB15:
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 186              		.loc 1 67 34 view .LVU59
 187 0048 8489     		ldrh	r4, [r0, #12]
 188 004a E9E7     		b	.L10
 189              	.L22:
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 190              		.loc 1 67 34 view .LVU60
 191              	.LBE15:
 192              	.LBE17:
  17:src/drivers/bbpwm/bbpwm.c **** 			bbpwm_set_high(device);
 193              		.loc 1 17 3 is_stmt 1 view .LVU61
  17:src/drivers/bbpwm/bbpwm.c **** 			bbpwm_set_high(device);
 194              		.loc 1 17 6 is_stmt 0 view .LVU62
 195 004c 0178     		ldrb	r1, [r0]
 196 004e 0029     		cmp	r1, #0
 197 0050 F4D0     		beq	.L9
 198              	.L8:
  23:src/drivers/bbpwm/bbpwm.c **** 			device->state = true;
 199              		.loc 1 23 4 is_stmt 1 view .LVU63
 200              	.LVL9:
 201              	.LBB18:
 202              	.LBI18:
  66:src/drivers/bbpwm/bbpwm.c **** 	device->gpio_port->ODR |= device->gpio_pin;
 203              		.loc 1 66 13 view .LVU64
 204              	.LBB19:
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 205              		.loc 1 67 2 view .LVU65
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 206              		.loc 1 67 8 is_stmt 0 view .LVU66
 207 0052 8268     		ldr	r2, [r0, #8]
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 208              		.loc 1 67 34 view .LVU67
 209 0054 8189     		ldrh	r1, [r0, #12]
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 210              		.loc 1 67 19 view .LVU68
 211 0056 5469     		ldr	r4, [r2, #20]
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 212              		.loc 1 67 25 view .LVU69
 213 0058 2143     		orrs	r1, r4
 214 005a 5161     		str	r1, [r2, #20]
 215              		.loc 1 70 2 is_stmt 1 view .LVU70
 216              	.LVL10:
 217              		.loc 1 70 2 is_stmt 0 view .LVU71
 218              	.LBE19:
 219              	.LBE18:
  24:src/drivers/bbpwm/bbpwm.c **** 		}
 220              		.loc 1 24 4 is_stmt 1 view .LVU72
  28:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_low(device);
 221              		.loc 1 28 2 view .LVU73
 222              	.L11:
  29:src/drivers/bbpwm/bbpwm.c **** 		device->state = !device->state;
 223              		.loc 1 29 3 view .LVU74
 224              	.LBB20:
 225              	.LBI20:
  59:src/drivers/bbpwm/bbpwm.c **** 	device->gpio_port->ODR ^= device->gpio_pin;
 226              		.loc 1 59 13 view .LVU75
ARM GAS  /tmp/cc4mZEMS.s 			page 7


 227              	.LBB21:
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 228              		.loc 1 60 2 view .LVU76
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 229              		.loc 1 60 19 is_stmt 0 view .LVU77
 230 005c 5469     		ldr	r4, [r2, #20]
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 231              		.loc 1 60 34 view .LVU78
 232 005e 8189     		ldrh	r1, [r0, #12]
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 233              		.loc 1 60 25 view .LVU79
 234 0060 6140     		eors	r1, r4
 235 0062 5161     		str	r1, [r2, #20]
  63:src/drivers/bbpwm/bbpwm.c **** }
 236              		.loc 1 63 2 is_stmt 1 view .LVU80
 237              	.LVL11:
  63:src/drivers/bbpwm/bbpwm.c **** }
 238              		.loc 1 63 2 is_stmt 0 view .LVU81
 239              	.LBE21:
 240              	.LBE20:
  30:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
 241              		.loc 1 30 3 is_stmt 1 view .LVU82
  30:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
 242              		.loc 1 30 17 is_stmt 0 view .LVU83
 243 0064 0022     		movs	r2, #0
  31:src/drivers/bbpwm/bbpwm.c **** 	}
 244              		.loc 1 31 23 view .LVU84
 245 0066 C380     		strh	r3, [r0, #6]
  30:src/drivers/bbpwm/bbpwm.c **** 		device->last_update = count;
 246              		.loc 1 30 17 view .LVU85
 247 0068 0270     		strb	r2, [r0]
  31:src/drivers/bbpwm/bbpwm.c **** 	}
 248              		.loc 1 31 3 is_stmt 1 view .LVU86
  31:src/drivers/bbpwm/bbpwm.c **** 	}
 249              		.loc 1 31 23 is_stmt 0 view .LVU87
 250 006a DFE7     		b	.L16
 251              	.L5:
  22:src/drivers/bbpwm/bbpwm.c **** 			bbpwm_set_high(device);
 252              		.loc 1 22 35 view .LVU88
 253 006c 4188     		ldrh	r1, [r0, #2]
  22:src/drivers/bbpwm/bbpwm.c **** 			bbpwm_set_high(device);
 254              		.loc 1 22 26 view .LVU89
 255 006e 0029     		cmp	r1, #0
 256 0070 EFD0     		beq	.L8
 257              	.L13:
  28:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_low(device);
 258              		.loc 1 28 24 discriminator 1 view .LVU90
 259 0072 C288     		ldrh	r2, [r0, #6]
 260 0074 9A1A     		subs	r2, r3, r2
  28:src/drivers/bbpwm/bbpwm.c **** 		bbpwm_set_low(device);
 261              		.loc 1 28 20 discriminator 1 view .LVU91
 262 0076 92B2     		uxth	r2, r2
 263 0078 8A42     		cmp	r2, r1
 264 007a D7D3     		bcc	.L16
 265 007c 8268     		ldr	r2, [r0, #8]
 266 007e EDE7     		b	.L11
 267              		.cfi_endproc
ARM GAS  /tmp/cc4mZEMS.s 			page 8


 268              	.LFE218:
 270              		.global	__aeabi_uidiv
 271              		.global	__aeabi_idiv
 272              		.section	.text.bbpwm_set_dc,"ax",%progbits
 273              		.align	1
 274              		.p2align 2,,3
 275              		.global	bbpwm_set_dc
 276              		.syntax unified
 277              		.code	16
 278              		.thumb_func
 280              	bbpwm_set_dc:
 281              	.LVL12:
 282              	.LFB219:
  43:src/drivers/bbpwm/bbpwm.c **** 	// Calculate ton and toff
 283              		.loc 1 43 62 is_stmt 1 view -0
 284              		.cfi_startproc
 285              		@ args = 0, pretend = 0, frame = 0
 286              		@ frame_needed = 0, uses_anonymous_args = 0
  45:src/drivers/bbpwm/bbpwm.c **** 	uint16_t toff = 0;																																											
 287              		.loc 1 45 2 view .LVU93
  46:src/drivers/bbpwm/bbpwm.c **** 
 288              		.loc 1 46 2 view .LVU94
  48:src/drivers/bbpwm/bbpwm.c **** 	toff = (uint16_t)(COUNTS_PER_CYCLE - ton);
 289              		.loc 1 48 2 view .LVU95
  48:src/drivers/bbpwm/bbpwm.c **** 	toff = (uint16_t)(COUNTS_PER_CYCLE - ton);
 290              		.loc 1 48 21 is_stmt 0 view .LVU96
 291 0000 0B01     		lsls	r3, r1, #4
 292 0002 5B1A     		subs	r3, r3, r1
  43:src/drivers/bbpwm/bbpwm.c **** 	// Calculate ton and toff
 293              		.loc 1 43 62 view .LVU97
 294 0004 10B5     		push	{r4, lr}
 295              	.LCFI1:
 296              		.cfi_def_cfa_offset 8
 297              		.cfi_offset 4, -8
 298              		.cfi_offset 14, -4
  48:src/drivers/bbpwm/bbpwm.c **** 	toff = (uint16_t)(COUNTS_PER_CYCLE - ton);
 299              		.loc 1 48 39 view .LVU98
 300 0006 FF21     		movs	r1, #255
 301              	.LVL13:
  57:src/drivers/bbpwm/bbpwm.c **** 
 302              		.loc 1 57 1 view .LVU99
 303              		@ sp needed
  43:src/drivers/bbpwm/bbpwm.c **** 	// Calculate ton and toff
 304              		.loc 1 43 62 view .LVU100
 305 0008 0400     		movs	r4, r0
  48:src/drivers/bbpwm/bbpwm.c **** 	toff = (uint16_t)(COUNTS_PER_CYCLE - ton);
 306              		.loc 1 48 21 view .LVU101
 307 000a 5801     		lsls	r0, r3, #5
 308              	.LVL14:
  48:src/drivers/bbpwm/bbpwm.c **** 	toff = (uint16_t)(COUNTS_PER_CYCLE - ton);
 309              		.loc 1 48 39 view .LVU102
 310 000c FFF7FEFF 		bl	__aeabi_idiv
 311              	.LVL15:
  49:src/drivers/bbpwm/bbpwm.c **** 	
 312              		.loc 1 49 7 view .LVU103
 313 0010 F023     		movs	r3, #240
  48:src/drivers/bbpwm/bbpwm.c **** 	toff = (uint16_t)(COUNTS_PER_CYCLE - ton);
ARM GAS  /tmp/cc4mZEMS.s 			page 9


 314              		.loc 1 48 6 view .LVU104
 315 0012 80B2     		uxth	r0, r0
 316              	.LVL16:
  49:src/drivers/bbpwm/bbpwm.c **** 	
 317              		.loc 1 49 2 is_stmt 1 view .LVU105
  52:src/drivers/bbpwm/bbpwm.c **** 	device->toff = toff;
 318              		.loc 1 52 2 view .LVU106
  49:src/drivers/bbpwm/bbpwm.c **** 	
 319              		.loc 1 49 7 is_stmt 0 view .LVU107
 320 0014 5B00     		lsls	r3, r3, #1
 321 0016 1B1A     		subs	r3, r3, r0
  52:src/drivers/bbpwm/bbpwm.c **** 	device->toff = toff;
 322              		.loc 1 52 14 view .LVU108
 323 0018 6080     		strh	r0, [r4, #2]
  53:src/drivers/bbpwm/bbpwm.c **** 
 324              		.loc 1 53 2 is_stmt 1 view .LVU109
  53:src/drivers/bbpwm/bbpwm.c **** 
 325              		.loc 1 53 15 is_stmt 0 view .LVU110
 326 001a A380     		strh	r3, [r4, #4]
  56:src/drivers/bbpwm/bbpwm.c **** }
 327              		.loc 1 56 2 is_stmt 1 view .LVU111
  57:src/drivers/bbpwm/bbpwm.c **** 
 328              		.loc 1 57 1 is_stmt 0 view .LVU112
 329 001c 0020     		movs	r0, #0
 330              	.LVL17:
 331              	.LVL18:
  57:src/drivers/bbpwm/bbpwm.c **** 
 332              		.loc 1 57 1 view .LVU113
 333 001e 10BD     		pop	{r4, pc}
 334              		.cfi_endproc
 335              	.LFE219:
 337              		.section	.text.bbpwm_set_low,"ax",%progbits
 338              		.align	1
 339              		.p2align 2,,3
 340              		.global	bbpwm_set_low
 341              		.syntax unified
 342              		.code	16
 343              		.thumb_func
 345              	bbpwm_set_low:
 346              	.LVL19:
 347              	.LFB220:
  59:src/drivers/bbpwm/bbpwm.c **** 	device->gpio_port->ODR ^= device->gpio_pin;
 348              		.loc 1 59 51 is_stmt 1 view -0
 349              		.cfi_startproc
 350              		@ args = 0, pretend = 0, frame = 0
 351              		@ frame_needed = 0, uses_anonymous_args = 0
 352              		@ link register save eliminated.
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 353              		.loc 1 60 2 view .LVU115
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 354              		.loc 1 60 8 is_stmt 0 view .LVU116
 355 0000 8268     		ldr	r2, [r0, #8]
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 356              		.loc 1 60 34 view .LVU117
 357 0002 8389     		ldrh	r3, [r0, #12]
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 358              		.loc 1 60 19 view .LVU118
ARM GAS  /tmp/cc4mZEMS.s 			page 10


 359 0004 5169     		ldr	r1, [r2, #20]
  64:src/drivers/bbpwm/bbpwm.c **** 
 360              		.loc 1 64 1 view .LVU119
 361 0006 0020     		movs	r0, #0
 362              	.LVL20:
  64:src/drivers/bbpwm/bbpwm.c **** 
 363              		.loc 1 64 1 view .LVU120
 364              		@ sp needed
  60:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_RESET);
 365              		.loc 1 60 25 view .LVU121
 366 0008 4B40     		eors	r3, r1
 367 000a 5361     		str	r3, [r2, #20]
  63:src/drivers/bbpwm/bbpwm.c **** }
 368              		.loc 1 63 2 is_stmt 1 view .LVU122
  64:src/drivers/bbpwm/bbpwm.c **** 
 369              		.loc 1 64 1 is_stmt 0 view .LVU123
 370 000c 7047     		bx	lr
 371              		.cfi_endproc
 372              	.LFE220:
 374 000e C046     		.section	.text.bbpwm_set_high,"ax",%progbits
 375              		.align	1
 376              		.p2align 2,,3
 377              		.global	bbpwm_set_high
 378              		.syntax unified
 379              		.code	16
 380              		.thumb_func
 382              	bbpwm_set_high:
 383              	.LVL21:
 384              	.LFB221:
  66:src/drivers/bbpwm/bbpwm.c **** 	device->gpio_port->ODR |= device->gpio_pin;
 385              		.loc 1 66 52 is_stmt 1 view -0
 386              		.cfi_startproc
 387              		@ args = 0, pretend = 0, frame = 0
 388              		@ frame_needed = 0, uses_anonymous_args = 0
 389              		@ link register save eliminated.
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 390              		.loc 1 67 2 view .LVU125
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 391              		.loc 1 67 8 is_stmt 0 view .LVU126
 392 0000 8268     		ldr	r2, [r0, #8]
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 393              		.loc 1 67 34 view .LVU127
 394 0002 8389     		ldrh	r3, [r0, #12]
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 395              		.loc 1 67 19 view .LVU128
 396 0004 5169     		ldr	r1, [r2, #20]
  71:src/drivers/bbpwm/bbpwm.c **** }...
 397              		.loc 1 71 1 view .LVU129
 398 0006 0020     		movs	r0, #0
 399              	.LVL22:
 400              		.loc 1 71 1 view .LVU130
 401              		@ sp needed
  67:src/drivers/bbpwm/bbpwm.c **** 	// HAL_GPIO_WritePin(device->gpio_port, device->gpio_pin, GPIO_PIN_SET);
 402              		.loc 1 67 25 view .LVU131
 403 0008 0B43     		orrs	r3, r1
 404 000a 5361     		str	r3, [r2, #20]
  70:src/drivers/bbpwm/bbpwm.c **** 	return BBPWM_ERR_OK;
ARM GAS  /tmp/cc4mZEMS.s 			page 11


 405              		.loc 1 70 2 is_stmt 1 view .LVU132
 406              		.loc 1 71 1 is_stmt 0 view .LVU133
 407 000c 7047     		bx	lr
 408              		.cfi_endproc
 409              	.LFE221:
 411 000e C046     		.text
 412              	.Letext0:
 413              		.file 2 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 414              		.file 3 "external/drivers/cmsis/include/stm32c031xx.h"
 415              		.file 4 "external/drivers/stm32c0xx/include/stm32c0xx_hal_def.h"
 416              		.file 5 "external/drivers/stm32c0xx/include/stm32c0xx_hal_dma.h"
 417              		.file 6 "external/drivers/stm32c0xx/include/stm32c0xx_hal_tim.h"
 418              		.file 7 "src/drivers/bbpwm/bbpwm.h"
ARM GAS  /tmp/cc4mZEMS.s 			page 12


DEFINED SYMBOLS
                            *ABS*:00000000 bbpwm.c
     /tmp/cc4mZEMS.s:19     .text.bbpwm_init:00000000 $t
     /tmp/cc4mZEMS.s:26     .text.bbpwm_init:00000000 bbpwm_init
     /tmp/cc4mZEMS.s:59     .text.bbpwm_update:00000000 $t
     /tmp/cc4mZEMS.s:66     .text.bbpwm_update:00000000 bbpwm_update
     /tmp/cc4mZEMS.s:273    .text.bbpwm_set_dc:00000000 $t
     /tmp/cc4mZEMS.s:280    .text.bbpwm_set_dc:00000000 bbpwm_set_dc
     /tmp/cc4mZEMS.s:338    .text.bbpwm_set_low:00000000 $t
     /tmp/cc4mZEMS.s:345    .text.bbpwm_set_low:00000000 bbpwm_set_low
     /tmp/cc4mZEMS.s:375    .text.bbpwm_set_high:00000000 $t
     /tmp/cc4mZEMS.s:382    .text.bbpwm_set_high:00000000 bbpwm_set_high

UNDEFINED SYMBOLS
__aeabi_uidiv
__aeabi_idiv
